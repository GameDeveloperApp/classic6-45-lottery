<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <!-- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –ú–ï–¢–ê-–¢–ï–ì–ò –î–õ–Ø –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#0a5c36">
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <title>üé∞ –ö–ª–∞—Å—Å–∏–∫–∞ 6/45 - Telegram Lottery</title>
    <style>
        /* –ö–∞–∑–∏–Ω–æ-—Å—Ç–∏–ª—å —Å –∑–µ–ª–µ–Ω—ã–º —Ñ–æ–Ω–æ–º –∏ Telegram Stars - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô */
        
        :root {
            --casino-dark-green: #0a5c36;
            --casino-green: #1e7e34;
            --casino-light-green: #28a745;
            --casino-gold: #ffd700;
            --casino-red: #dc3545;
            --casino-blue: #0088cc;
            --casino-purple: #6f42c1;
            --telegram-blue: #34b7f1;
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --shadow-dark: rgba(0, 0, 0, 0.5);
            
            /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - –£–ü–†–û–©–ï–ù–ù–´–ï */
            --container-padding: 12px;
            --number-btn-size: 44px;
            --grid-columns: 7;
            --font-size-base: 15px;
            --h1-size: 2.2rem;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            backface-visibility: hidden;
        }
        
        html {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: #0a5c36; /* –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô —Ü–≤–µ—Ç –≤–º–µ—Å—Ç–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
            color: var(--text-light);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            position: relative;
            overflow-x: hidden;
            font-size: var(--font-size-base);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: pan-y;
            padding: 0;
            width: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Telegram Mini App —Å—Ç–∏–ª–∏ - –£–ü–†–û–©–ï–ù–ù–´–ï */
        body.telegram-mini-app {
            background: #0a5c36 !important; /* –¢–æ–ª—å–∫–æ —Ü–≤–µ—Ç, –±–µ–∑ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
            touch-action: manipulation;
        }
        
        /* –£–ü–†–û–©–ï–ù–ù–´–ô –≠–§–§–ï–ö–¢ –ö–ê–ó–ò–ù–û - —Ç–æ–ª—å–∫–æ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ */
        body:not(.telegram-mini-app)::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(220, 53, 69, 0.1) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }
        
        .lottery-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--container-padding);
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 20px var(--shadow-dark);
            position: relative;
            overflow: hidden;
            width: calc(100% - 16px);
            min-height: calc(100vh - 24px);
            margin-top: 8px;
            margin-bottom: 8px;
        }
        
        body.telegram-mini-app .lottery-container {
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            background: rgba(10, 92, 54, 0.95) !important;
            width: 100%;
            margin: 0;
            border-radius: 0;
            min-height: 100vh;
            padding-bottom: max(12px, env(safe-area-inset-bottom));
        }
        
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤ —Å—Ç–∏–ª–µ –∫–∞–∑–∏–Ω–æ - –£–ü–†–û–©–ï–ù–ù–´–ô */
        h1 {
            text-align: center;
            font-size: var(--h1-size);
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--casino-gold), #ffed4e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            padding-bottom: 12px;
            line-height: 1.2;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--casino-gold), transparent);
        }
        
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .header-section p {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            flex: 1;
            min-width: 180px;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø—Ä–∞–≤–∏–ª –≤ —Å—Ç–∏–ª–µ –∫–∞–∑–∏–Ω–æ - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .rules-btn {
            background: linear-gradient(145deg, var(--casino-blue), var(--casino-purple));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            flex-shrink: 0;
            min-height: 44px;
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .rules-btn:active {
            transform: scale(0.96);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* –ò–Ω—Ñ–æ –ø–∞–Ω–µ–ª—å —Å –∑–≤–µ–∑–¥–∞–º–∏ - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .stars-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            background: rgba(0, 136, 204, 0.15);
            padding: 12px 16px;
            border-radius: 12px;
            margin: 16px 0;
            border: 1px solid rgba(52, 183, 241, 0.25);
            flex-wrap: wrap;
        }
        
        .stars-info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 140px;
        }
        
        .jackpot-star {
            font-size: 1.8rem;
            color: var(--casino-gold);
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            align-items: center;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            justify-content: center;
        }
        
        .control-btn {
            background: linear-gradient(145deg, var(--casino-blue), #0056b3);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.15s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            min-height: 44px;
            flex: 1;
            min-width: 140px;
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .control-btn:active {
            transform: scale(0.96);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }
        
        .control-btn.quick-pick {
            background: linear-gradient(145deg, var(--casino-green), #1a6b2c);
        }
        
        .control-btn.clear {
            background: linear-gradient(145deg, var(--casino-red), #b02a37);
        }
        
        .control-btn.play {
            background: linear-gradient(145deg, var(--casino-gold), #e6b800);
            color: var(--text-dark);
            font-size: 1rem;
            padding: 12px 24px;
            font-weight: 700;
        }
        
        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è Telegram Stars - –£–ü–†–û–©–ï–ù–ù–´–ô */
        .stars-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            background: linear-gradient(145deg, #0088cc, var(--telegram-blue));
            color: white;
            padding: 5px 12px;
            border-radius: 16px;
            font-weight: bold;
            font-size: 0.85rem;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            min-width: 60px;
        }
        
        .star-icon {
            color: #ffd700;
            font-size: 1em;
        }
        
        /* –ù–æ–≤—ã–π –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω */
        .tickets-section {
            background: rgba(0, 0, 0, 0.15);
            padding: 16px;
            border-radius: 12px;
            margin: 16px 0;
            border: 1px solid rgba(255, 215, 0, 0.15);
        }
        
        .timer-display {
            background: linear-gradient(145deg, #0a5c36, #1e7e34);
            color: var(--casino-gold);
            padding: 12px 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 16px;
            font-size: 1.1rem;
            font-weight: bold;
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .tickets-carousel {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: var(--casino-gold) transparent;
            -webkit-overflow-scrolling: touch;
        }
        
        .tickets-carousel::-webkit-scrollbar {
            height: 6px;
        }
        
        .tickets-carousel::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .tickets-carousel::-webkit-scrollbar-thumb {
            background: var(--casino-gold);
            border-radius: 3px;
        }
        
        .ticket-card {
            min-width: 280px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 16px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }
        
        .ticket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ticket-id {
            font-weight: bold;
            color: var(--casino-gold);
            font-size: 1.1rem;
        }
        
        .tiraj-id {
            font-weight: bold;
            color: var(--telegram-blue);
        }
        
        .ticket-numbers {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 6px;
            margin: 10px 0;
        }
        
        .ticket-number {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            border: 2px solid transparent;
        }
        
        .ticket-number.selected {
            background: linear-gradient(145deg, var(--casino-red), #ff4757);
            color: white;
        }
        
        .ticket-number.winning {
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
            color: white;
            border-color: #4CAF50;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.5);
        }
        
        .ticket-status {
            text-align: center;
            padding: 8px;
            border-radius: 6px;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .status-win {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }
        
        .status-lose {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border: 1px solid #f44336;
        }
        
        .status-pending {
            background: rgba(255, 215, 0, 0.2);
            color: var(--casino-gold);
            border: 1px solid var(--casino-gold);
        }
        
        .ticket-draw-time {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            margin-top: 8px;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —á–∏—Å–µ–ª */
        .numbers-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .numbers-content {
            background: #0a3c24;
            margin: 0;
            padding: 20px;
            border-radius: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            border: none;
            position: relative;
        }
        
        .numbers-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .numbers-header h2 {
            color: var(--casino-gold);
            font-size: 1.5rem;
        }
        
        .close-modal {
            background: var(--casino-red);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ */
        .rules-modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .rules-content {
            background: #0a3c24;
            margin: 5% auto;
            padding: 20px;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            border: 2px solid var(--casino-gold);
            position: relative;
        }
        
        .rules-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .rules-close {
            background: var(--casino-red);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –°–µ—Ç–∫–∞ –Ω–æ–º–µ—Ä–æ–≤ –≤ —Å—Ç–∏–ª–µ –∫–∞–∑–∏–Ω–æ - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø */
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(var(--grid-columns), 1fr);
            gap: 8px;
            margin: 20px 0;
            padding: 12px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.15);
            justify-items: center;
            max-height: none !important;
            overflow: visible !important;
            width: 100%;
        }
        
        .number-btn {
            width: var(--number-btn-size);
            height: var(--number-btn-size);
            min-width: 40px;
            min-height: 40px;
            border: 2px solid var(--casino-gold);
            border-radius: 50%;
            background: linear-gradient(145deg, var(--casino-dark-green), var(--casino-green));
            color: var(--casino-gold);
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
            user-select: none;
            -webkit-appearance: none;
            aspect-ratio: 1 / 1;
        }
        
        .number-btn:active {
            transform: scale(0.92);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
        }
        
        .number-btn.selected {
            background: linear-gradient(145deg, var(--casino-red), #ff4757);
            color: white;
            border-color: white;
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.5);
            animation: pulse 1.2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        /* –ü—Ä–µ–ª–æ–∞–¥–µ—Ä */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a5c36;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        .preloader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .preloader .loader {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--casino-gold);
            animation: spin 0.8s linear infinite;
            margin-bottom: 16px;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease forwards;
        }
        
        /* –¢–µ–ª–µ–≥—Ä–∞–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
        body.telegram-mini-app {
            --grid-columns: 7;
            --number-btn-size: 42px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 374px) {
            :root {
                --grid-columns: 6;
                --number-btn-size: 40px;
                --h1-size: 1.9rem;
                --container-padding: 10px;
            }
            
            .ticket-card {
                min-width: 260px;
            }
            
            .ticket-numbers {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 319px) {
            :root {
                --grid-columns: 5;
                --number-btn-size: 38px;
            }
        }
        
        @media (orientation: landscape) and (max-height: 600px) {
            :root {
                --number-btn-size: 36px;
                --h1-size: 1.8rem;
            }
            
            .numbers-grid {
                grid-template-columns: repeat(9, 1fr);
                gap: 6px;
            }
        }
        
        /* –°–Ω–∏–∂–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
    <div id="preloader" class="preloader">
        <div class="loader"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</p>
    </div>
    
    <div class="lottery-container">
        <h1>üé∞ –ö–ª–∞—Å—Å–∏–∫–∞ 6/45</h1>
        
        <div class="header-section">
            <p>–¢–µ–∫—É—â–∏–π —Ç–∏—Ä–∞–∂: <span id="currentTiraj">‚Ññ 001</span></p>
            <button onclick="showRules()" class="rules-btn">
                <span>üìã</span> –ü—Ä–∞–≤–∏–ª–∞
            </button>
        </div>
        
        <div class="stars-info">
            <div class="stars-info-item">
                <span class="jackpot-star">‚≠ê</span>
                <span>–î–ñ–ï–ö–ü–û–¢: <span class="stars-badge">1,000,000 <span class="star-icon">‚òÖ</span></span></span>
            </div>
            <div class="stars-info-item" style="justify-content: flex-end;">
                <span>–°—Ç–∞–≤–∫–∞: <span class="stars-badge">100 <span class="star-icon">‚òÖ</span></span></span>
            </div>
        </div>
        
        <div class="timer-display">
            <div>üïí –î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–∏—Ä–∞–∂–∞:</div>
            <div id="countdownTimer">09:59</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">–¢–∏—Ä–∞–∂ –ø—Ä–æ–¥–ª–∏—Ç—Å—è 2 –º–∏–Ω—É—Ç—ã</div>
        </div>
        
        <div class="controls">
            <button onclick="showNumbersModal()" class="control-btn quick-pick">
                <span>üé´</span> –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç
            </button>
            <button onclick="showMyTickets()" class="control-btn">
                <span>üìã</span> –ú–æ–∏ –±–∏–ª–µ—Ç—ã
            </button>
        </div>
        
        <div class="tickets-section">
            <h3 style="text-align: center; color: var(--casino-gold); margin-bottom: 16px;">üé´ –ö—É–ø–ª–µ–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã</h3>
            <div class="tickets-carousel" id="ticketsCarousel">
                <!-- –ë–∏–ª–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                    –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤.<br>
                    –ù–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç" –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ç–∏—Ä–∞–∂–µ!
                </div>
            </div>
        </div>
        
        <!-- –¢–µ–ª–µ–≥—Ä–∞–º –±–∞–ª–∞–Ω—Å (—Ç–æ–ª—å–∫–æ –≤ Mini App) -->
        <div id="telegramBalance" style="display: none; margin-top: 20px; text-align: center;">
            <div class="telegram-balance" style="display: inline-flex; align-items: center; gap: 10px; padding: 10px 20px; background: rgba(52, 183, 241, 0.1); border-radius: 10px; border: 1px solid rgba(52, 183, 241, 0.3);">
                <span>–ë–∞–ª–∞–Ω—Å Telegram Stars:</span>
                <span class="stars-badge" id="telegramStarsBalance">0 ‚òÖ</span>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —á–∏—Å–µ–ª -->
    <div id="numbersModal" class="numbers-modal">
        <div class="numbers-content">
            <div class="numbers-header">
                <h2>üéØ –í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª</h2>
                <button onclick="hideNumbersModal()" class="close-modal">&times;</button>
            </div>
            
            <div class="numbers-grid" id="numbersGrid"></div>
            
            <div style="margin: 20px 0; text-align: center;">
                <div id="selectedNumbersCounter" style="font-size: 1.2rem; color: var(--casino-gold); margin-bottom: 16px;">
                    –í—ã–±—Ä–∞–Ω–æ: 0/6
                </div>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px;">
                    <button onclick="quickPick()" class="control-btn quick-pick">
                        <span>üé≤</span> –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä
                    </button>
                    <button onclick="clearSelection()" class="control-btn clear">
                        <span>üóëÔ∏è</span> –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                </div>
                
                <button onclick="buyTicket()" id="buyTicketBtn" class="control-btn play" style="width: 100%; max-width: 300px; margin: 0 auto;">
                    <span>üí∞</span> –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç –∑–∞ <span class="stars-badge">100 <span class="star-icon">‚òÖ</span></span>
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ -->
    <div id="rulesModal" class="rules-modal">
        <div class="rules-content">
            <div class="rules-header">
                <h2>üìã –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã ¬´–ö–ª–∞—Å—Å–∏–∫–∞ 6/45¬ª</h2>
                <span class="rules-close" onclick="hideRules()">&times;</span>
            </div>
            
            <div class="rules-section">
                <h3>üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
                <ul class="rules-list">
                    <li><strong>–¶–µ–ª—å –∏–≥—Ä—ã:</strong> –£–≥–∞–¥–∞—Ç—å –æ—Ç 3 –¥–æ 6 —á–∏—Å–µ–ª –∏–∑ 45</li>
                    <li><strong>–í—ã–±–æ—Ä —á–∏—Å–µ–ª:</strong> –ò–≥—Ä–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç 6 —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 45</li>
                    <li><strong>–¢–∏—Ä–∞–∂:</strong> –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–ø–∞–¥–∞–µ—Ç 6 –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö —á–∏—Å–µ–ª</li>
                    <li><strong>–°—Ç–∞–≤–∫–∞:</strong> <span class="stars-badge">100 <span class="star-icon">‚òÖ</span></span> –∑–∞ –±–∏–ª–µ—Ç</li>
                    <li><strong>–ß–∞—Å—Ç–æ—Ç–∞ —Ç–∏—Ä–∞–∂–µ–π:</strong> –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç</li>
                    <li><strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∏—Ä–∞–∂–∞:</strong> 2 –º–∏–Ω—É—Ç—ã</li>
                </ul>
            </div>
            
            <div class="rules-section">
                <h3>üèÜ –í—ã–∏–≥—Ä—ã—à–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏</h3>
                <ul class="rules-list">
                    <li><strong>6 —á–∏—Å–µ–ª:</strong> –î–∂–µ–∫–ø–æ—Ç - 1,000,000 ‚òÖ</li>
                    <li><strong>5 —á–∏—Å–µ–ª:</strong> 50,000 ‚òÖ</li>
                    <li><strong>4 —á–∏—Å–ª–∞:</strong> 1,000 ‚òÖ</li>
                    <li><strong>3 —á–∏—Å–ª–∞:</strong> 100 ‚òÖ</li>
                </ul>
            </div>
            
            <div class="rules-section">
                <h3>‚è∞ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</h3>
                <ul class="rules-list">
                    <li><strong>–ü—Ä–∏–µ–º —Å—Ç–∞–≤–æ–∫:</strong> –î–æ –Ω–∞—á–∞–ª–∞ —Ç–∏—Ä–∞–∂–∞</li>
                    <li><strong>–¢–∏—Ä–∞–∂:</strong> –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç</li>
                    <li><strong>–†–æ–∑—ã–≥—Ä—ã—à:</strong> –î–ª–∏—Ç—Å—è 2 –º–∏–Ω—É—Ç—ã</li>
                    <li><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</strong> –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∞</li>
                </ul>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="hideRules()" class="control-btn play" style="padding: 12px 30px;">
                    <span>‚≠ê</span> –ü–æ–Ω—è—Ç–Ω–æ!
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript –∫–æ–¥ -->
    <script>
        'use strict';
        
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò–ì–†–´ ====================
        const GAME_CONFIG = {
            totalNumbers: 45,
            numbersToSelect: 6,
            ticketPrice: 100,
            drawInterval: 10, // –º–∏–Ω—É—Ç
            drawDuration: 2, // –º–∏–Ω—É—Ç
            jackpot: 1000000,
            
            prizes: {
                3: 100,
                4: 1000,
                5: 50000,
                6: 1000000
            }
        };

        // ==================== –ö–õ–ê–°–° –ò–ì–†–´ ====================
        class Classic6_45 {
            constructor() {
                this.selectedNumbers = new Set();
                this.userTickets = [];
                this.tirajHistory = [];
                this.currentTiraj = 0;
                this.nextDrawTime = null;
                this.drawTimer = null;
                this.countdownTimer = null;
                this.isTelegramApp = false;
                this.telegramUserId = null;
                this.drawStatus = 'waiting'; // waiting, drawing, finished
                
                this.init();
            }
            
            async init() {
                console.log("üé∞ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ö–ª–∞—Å—Å–∏–∫–∞ 6/45...");
                
                this.checkTelegramEnvironment();
                await this.loadGameData();
                this.initNumberGrid();
                this.startDrawSystem();
                this.updateUI();
                
                console.log("‚úÖ –ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞!");
            }
            
            checkTelegramEnvironment() {
                if (window.Telegram && Telegram.WebApp) {
                    this.isTelegramApp = true;
                    Telegram.WebApp.expand();
                    document.body.classList.add('telegram-mini-app');
                }
            }
            
            async loadGameData() {
                try {
                    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
                    const savedData = localStorage.getItem('classic6_45_data');
                    if (savedData) {
                        const data = JSON.parse(savedData);
                        this.userTickets = data.userTickets || [];
                        this.tirajHistory = data.tirajHistory || [];
                        this.currentTiraj = data.currentTiraj || 0;
                        this.nextDrawTime = data.nextDrawTime ? new Date(data.nextDrawTime) : null;
                    }
                    
                    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏—Ä–∞–∂–µ–π –∏–∑ —Ñ–∞–π–ª–∞
                    await this.loadTirajData();
                    
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                }
            }
            
            async loadTirajData() {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç fetch –∫ —Å–µ—Ä–≤–µ—Ä—É
                    // –î–ª—è –¥–µ–º–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage
                    const savedTiraj = localStorage.getItem('tiraj_data');
                    if (savedTiraj) {
                        this.tirajHistory = JSON.parse(savedTiraj);
                        if (this.tirajHistory.length > 0) {
                            this.currentTiraj = Math.max(...this.tirajHistory.map(t => t.id)) + 1;
                        } else {
                            this.currentTiraj = 1;
                        }
                    } else {
                        this.currentTiraj = 1;
                        this.tirajHistory = [];
                    }
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏—Ä–∞–∂–µ–π:', error);
                }
            }
            
            async saveTirajData() {
                try {
                    localStorage.setItem('tiraj_data', JSON.stringify(this.tirajHistory));
                    
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                    console.log('üíæ –¢–∏—Ä–∞–∂ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ë–î');
                    
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∏—Ä–∞–∂–µ–π:', error);
                }
            }
            
            initNumberGrid() {
                const grid = document.getElementById('numbersGrid');
                if (!grid) return;
                
                grid.innerHTML = '';
                
                for (let i = 1; i <= GAME_CONFIG.totalNumbers; i++) {
                    const button = this.createNumberButton(i);
                    grid.appendChild(button);
                }
            }
            
            createNumberButton(number) {
                const button = document.createElement('button');
                button.className = 'number-btn';
                button.textContent = number;
                button.dataset.number = number;
                
                button.addEventListener('click', () => this.toggleNumber(number));
                
                return button;
            }
            
            toggleNumber(number) {
                if (this.selectedNumbers.has(number)) {
                    this.selectedNumbers.delete(number);
                } else {
                    if (this.selectedNumbers.size >= GAME_CONFIG.numbersToSelect) {
                        this.showNotification(`–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ ${GAME_CONFIG.numbersToSelect} —á–∏—Å–µ–ª`);
                        return;
                    }
                    this.selectedNumbers.add(number);
                }
                
                this.updateNumberButtons();
                this.updateSelectionCounter();
            }
            
            updateNumberButtons() {
                const buttons = document.querySelectorAll('.number-btn');
                buttons.forEach(btn => {
                    const num = parseInt(btn.dataset.number);
                    btn.classList.toggle('selected', this.selectedNumbers.has(num));
                });
            }
            
            updateSelectionCounter() {
                const counter = document.getElementById('selectedNumbersCounter');
                if (counter) {
                    const count = this.selectedNumbers.size;
                    counter.textContent = `–í—ã–±—Ä–∞–Ω–æ: ${count}/${GAME_CONFIG.numbersToSelect}`;
                    counter.style.color = count === GAME_CONFIG.numbersToSelect ? '#4CAF50' : 
                                       count > 0 ? '#FFD700' : '#f44336';
                }
            }
            
            quickPick() {
                this.selectedNumbers.clear();
                const allNumbers = Array.from({length: GAME_CONFIG.totalNumbers}, (_, i) => i + 1);
                const shuffled = this.shuffleArray(allNumbers);
                
                for (let i = 0; i < GAME_CONFIG.numbersToSelect; i++) {
                    this.selectedNumbers.add(shuffled[i]);
                }
                
                this.updateNumberButtons();
                this.updateSelectionCounter();
                this.showNotification('üé≤ –í—ã–±—Ä–∞–Ω—ã —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞!');
            }
            
            clearSelection() {
                this.selectedNumbers.clear();
                this.updateNumberButtons();
                this.updateSelectionCounter();
                this.showNotification('üóëÔ∏è –í—ã–±–æ—Ä –æ—á–∏—â–µ–Ω!');
            }
            
            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }
            
            async buyTicket() {
                if (this.selectedNumbers.size !== GAME_CONFIG.numbersToSelect) {
                    this.showNotification(`–ù—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ä–æ–≤–Ω–æ ${GAME_CONFIG.numbersToSelect} —á–∏—Å–µ–ª`);
                    return;
                }
                
                if (this.drawStatus === 'drawing') {
                    this.showNotification('‚ùå –ü—Ä–∏–µ–º —Å—Ç–∞–≤–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω! –¢–∏—Ä–∞–∂ —É–∂–µ –Ω–∞—á–∞–ª—Å—è');
                    return;
                }
                
                const ticketId = this.generateTicketId();
                const tirajId = this.currentTiraj;
                const numbers = Array.from(this.selectedNumbers).sort((a, b) => a - b);
                
                const ticket = {
                    id: ticketId,
                    tirajId: tirajId,
                    numbers: numbers,
                    purchaseTime: new Date().toISOString(),
                    drawTime: this.nextDrawTime.toISOString(),
                    winningNumbers: [],
                    matchedNumbers: [],
                    winAmount: 0,
                    status: 'pending',
                    formattedId: this.formatTicketId(ticketId),
                    formattedTirajId: this.formatTirajId(tirajId)
                };
                
                this.userTickets.unshift(ticket);
                this.updateTicketsDisplay();
                
                this.showNotification(`üé´ –ë–∏–ª–µ—Ç ${ticket.formattedId} –∫—É–ø–ª–µ–Ω! –¢–∏—Ä–∞–∂ ${ticket.formattedTirajId}`);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                await this.saveGameData();
                
                // –û—á–∏—â–∞–µ–º –≤—ã–±–æ—Ä –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                this.clearSelection();
                setTimeout(() => hideNumbersModal(), 1000);
            }
            
            generateTicketId() {
                const timestamp = Date.now();
                const random = Math.floor(Math.random() * 1000);
                return parseInt(`${timestamp}${random}`.slice(-9));
            }
            
            formatTicketId(id) {
                const str = id.toString().padStart(9, '0');
                return `${str.slice(0, 3)} ${str.slice(3, 6)} ${str.slice(6, 9)}`;
            }
            
            formatTirajId(id) {
                return id.toString().padStart(3, '0');
            }
            
            startDrawSystem() {
                if (!this.nextDrawTime) {
                    // –ü–µ—Ä–≤—ã–π —Ç–∏—Ä–∞–∂ —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç
                    this.nextDrawTime = new Date();
                    this.nextDrawTime.setMinutes(this.nextDrawTime.getMinutes() + GAME_CONFIG.drawInterval);
                }
                
                this.updateCountdown();
                this.countdownTimer = setInterval(() => this.updateCountdown(), 1000);
            }
            
            updateCountdown() {
                const now = new Date();
                const timeDiff = this.nextDrawTime - now;
                
                if (timeDiff <= 0) {
                    // –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–∏—Ä–∞–∂
                    if (this.drawStatus !== 'drawing') {
                        this.startDraw();
                    }
                    
                    const drawTimePassed = Math.abs(timeDiff) / 1000;
                    const drawTimeLeft = (GAME_CONFIG.drawDuration * 60) - drawTimePassed;
                    
                    if (drawTimeLeft <= 0) {
                        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–∏—Ä–∞–∂–∞
                        this.finishDraw();
                    } else {
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º—è —Ä–æ–∑—ã–≥—Ä—ã—à–∞
                        this.updateTimerDisplay('drawing', drawTimeLeft);
                    }
                } else {
                    // –û–∂–∏–¥–∞–Ω–∏–µ —Ç–∏—Ä–∞–∂–∞
                    this.updateTimerDisplay('waiting', timeDiff / 1000);
                }
            }
            
            updateTimerDisplay(status, seconds) {
                const timerElement = document.getElementById('countdownTimer');
                const tirajElement = document.getElementById('currentTiraj');
                
                if (!timerElement) return;
                
                if (status === 'drawing') {
                    this.drawStatus = 'drawing';
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    timerElement.innerHTML = `üé∞ –†–æ–∑—ã–≥—Ä—ã—à: <span style="color:#ff4757">${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}</span>`;
                    tirajElement.textContent = `‚Ññ ${this.formatTirajId(this.currentTiraj)} (–†–û–ó–´–ì–†–´–®)`;
                } else {
                    this.drawStatus = 'waiting';
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    timerElement.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                    tirajElement.textContent = `‚Ññ ${this.formatTirajId(this.currentTiraj)}`;
                }
            }
            
            async startDraw() {
                console.log('üé∞ –ù–∞—á–∞–ª–æ —Ç–∏—Ä–∞–∂–∞', this.currentTiraj);
                this.drawStatus = 'drawing';
                this.showNotification('üé∞ –¢–∏—Ä–∞–∂ –Ω–∞—á–∞–ª—Å—è! –†–æ–∑—ã–≥—Ä—ã—à 2 –º–∏–Ω—É—Ç—ã');
            }
            
            async finishDraw() {
                console.log('üé∞ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–∏—Ä–∞–∂–∞', this.currentTiraj);
                
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö —á–∏—Å–µ–ª
                const winningNumbers = this.generateWinningNumbers();
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–ª–µ—Ç–æ–≤ —ç—Ç–æ–≥–æ —Ç–∏—Ä–∞–∂–∞
                const tirajTickets = this.userTickets.filter(t => t.tirajId === this.currentTiraj);
                
                for (const ticket of tirajTickets) {
                    const matchedNumbers = ticket.numbers.filter(num => winningNumbers.includes(num));
                    ticket.winningNumbers = winningNumbers;
                    ticket.matchedNumbers = matchedNumbers;
                    ticket.status = matchedNumbers.length >= 3 ? 'win' : 'lose';
                    
                    if (matchedNumbers.length >= 3) {
                        ticket.winAmount = GAME_CONFIG.prizes[matchedNumbers.length] || 0;
                        this.showNotification(`üéâ –ë–∏–ª–µ—Ç ${ticket.formattedId} –≤—ã–∏–≥—Ä–∞–ª ${ticket.winAmount} ‚òÖ!`);
                    }
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–∏—Ä–∞–∂–∞
                const tirajResult = {
                    id: this.currentTiraj,
                    date: new Date().toISOString(),
                    winningNumbers: winningNumbers,
                    ticketsCount: tirajTickets.length,
                    winners: tirajTickets.filter(t => t.status === 'win').length
                };
                
                this.tirajHistory.push(tirajResult);
                
                // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ç–∏—Ä–∞–∂
                this.currentTiraj++;
                this.nextDrawTime = new Date();
                this.nextDrawTime.setMinutes(this.nextDrawTime.getMinutes() + GAME_CONFIG.drawInterval);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                await this.saveGameData();
                await this.saveTirajData();
                
                this.updateTicketsDisplay();
                this.drawStatus = 'waiting';
                
                this.showNotification(`‚úÖ –¢–∏—Ä–∞–∂ ${this.formatTirajId(tirajResult.id)} –∑–∞–≤–µ—Ä—à–µ–Ω! –í—ã–ø–∞–ª–∏ —á–∏—Å–ª–∞: ${winningNumbers.join(', ')}`);
            }
            
            generateWinningNumbers() {
                const numbers = [];
                while (numbers.length < 6) {
                    const num = Math.floor(Math.random() * GAME_CONFIG.totalNumbers) + 1;
                    if (!numbers.includes(num)) {
                        numbers.push(num);
                    }
                }
                return numbers.sort((a, b) => a - b);
            }
            
            updateTicketsDisplay() {
                const carousel = document.getElementById('ticketsCarousel');
                if (!carousel) return;
                
                if (this.userTickets.length === 0) {
                    carousel.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5); width: 100%;">
                            –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤.<br>
                            –ù–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç" –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ç–∏—Ä–∞–∂–µ!
                        </div>
                    `;
                    return;
                }
                
                carousel.innerHTML = '';
                
                this.userTickets.forEach(ticket => {
                    const ticketElement = this.createTicketElement(ticket);
                    carousel.appendChild(ticketElement);
                });
            }
            
            createTicketElement(ticket) {
                const div = document.createElement('div');
                div.className = 'ticket-card fade-in';
                
                const drawTime = new Date(ticket.drawTime);
                const timeStr = drawTime.toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                let statusText = '';
                let statusClass = '';
                
                if (ticket.status === 'win') {
                    statusText = `üéâ –° –≤—ã–∏–≥—Ä—ã—à–µ–º (${ticket.winAmount} ‚òÖ)`;
                    statusClass = 'status-win';
                } else if (ticket.status === 'lose') {
                    statusText = '‚ùå –ë–µ–∑ –≤—ã–∏–≥—Ä—ã—à–∞';
                    statusClass = 'status-lose';
                } else {
                    statusText = '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ç–∏—Ä–∞–∂–∞';
                    statusClass = 'status-pending';
                }
                
                div.innerHTML = `
                    <div class="ticket-header">
                        <div class="ticket-id">–ë–∏–ª–µ—Ç: ${ticket.formattedId}</div>
                        <div class="tiraj-id">–¢–∏—Ä–∞–∂: ${ticket.formattedTirajId}</div>
                    </div>
                    
                    <div class="ticket-numbers">
                        ${ticket.numbers.map(num => {
                            const isWinning = ticket.winningNumbers.includes(num);
                            const isSelected = ticket.matchedNumbers.includes(num);
                            let className = 'ticket-number';
                            if (isSelected) className += ' winning';
                            else if (ticket.status !== 'pending') className += ' selected';
                            
                            return `<div class="${className}">${num}</div>`;
                        }).join('')}
                    </div>
                    
                    <div class="ticket-status ${statusClass}">
                        ${statusText}
                    </div>
                    
                    <div class="ticket-draw-time">
                        –¢–∏—Ä–∞–∂: ${timeStr}
                    </div>
                `;
                
                return div;
            }
            
            showNotification(message) {
                console.log('üîî', message);
                
                if (this.isTelegramApp && window.Telegram?.WebApp) {
                    Telegram.WebApp.showAlert(message);
                } else {
                    alert(message);
                }
            }
            
            async saveGameData() {
                try {
                    const data = {
                        userTickets: this.userTickets,
                        tirajHistory: this.tirajHistory,
                        currentTiraj: this.currentTiraj,
                        nextDrawTime: this.nextDrawTime.toISOString()
                    };
                    
                    localStorage.setItem('classic6_45_data', JSON.stringify(data));
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:', error);
                }
            }
            
            updateUI() {
                this.updateTicketsDisplay();
                this.updateSelectionCounter();
            }
        }

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        let gameInstance = null;

        async function initGame() {
            if (!gameInstance) {
                gameInstance = new Classic6_45();
                await gameInstance.init();
            }
            return gameInstance;
        }

        function showNumbersModal() {
            const modal = document.getElementById('numbersModal');
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                gameInstance.updateSelectionCounter();
            }
        }

        function hideNumbersModal() {
            const modal = document.getElementById('numbersModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function quickPick() {
            if (gameInstance) gameInstance.quickPick();
        }

        function clearSelection() {
            if (gameInstance) gameInstance.clearSelection();
        }

        async function buyTicket() {
            if (gameInstance) await gameInstance.buyTicket();
        }

        function showMyTickets() {
            const carousel = document.getElementById('ticketsCarousel');
            if (carousel && carousel.firstElementChild) {
                carousel.firstElementChild.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'start'
                });
            }
        }

        function showRules() {
            const modal = document.getElementById('rulesModal');
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        function hideRules() {
            const modal = document.getElementById('rulesModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function hidePreloader() {
            const preloader = document.getElementById('preloader');
            if (preloader) {
                preloader.classList.add('hidden');
                setTimeout(() => {
                    preloader.style.display = 'none';
                }, 300);
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        (async function() {
            console.log('üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã –ö–ª–∞—Å—Å–∏–∫–∞ 6/45...');
            
            setTimeout(hidePreloader, 1000);
            
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }
            
            await initGame();
            hidePreloader();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            window.addEventListener('click', (event) => {
                const numbersModal = document.getElementById('numbersModal');
                const rulesModal = document.getElementById('rulesModal');
                
                if (event.target === numbersModal) hideNumbersModal();
                if (event.target === rulesModal) hideRules();
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape') {
                    hideNumbersModal();
                    hideRules();
                }
            });
            
            console.log('‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        })();
    </script>
</body>
    </html>
