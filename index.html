<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#0a5c36">
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <title>üé∞ –ö–ª–∞—Å—Å–∏–∫–∞ 6/45</title>
    <style>
        /* ==================== –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ==================== */
        :root {
            --primary-green: #0a5c36;
            --dark-green: #083c24;
            --light-green: #1e7e34;
            --gold: #ffd700;
            --red: #dc3545;
            --blue: #0088cc;
            --telegram-blue: #34b7f1;
            --text-light: #ffffff;
            --text-dark: #212529;
            --bg-overlay: rgba(0, 0, 0, 0.85);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            background: var(--primary-green);
            color: var(--text-light);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        /* ==================== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† ==================== */
        #app {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* ==================== –®–ê–ü–ö–ê ==================== */
        .header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
            position: relative;
        }
        
        .header h1 {
            font-size: clamp(22px, 5vw, 28px);
            color: var(--gold);
            margin-bottom: 12px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .timer-container {
            background: linear-gradient(145deg, var(--dark-green), var(--light-green));
            border-radius: 12px;
            padding: 16px;
            margin: 16px auto;
            max-width: 400px;
            border: 2px solid var(--gold);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .timer-title {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .timer {
            font-size: 32px;
            font-weight: bold;
            color: var(--gold);
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .timer-subtitle {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 4px;
        }
        
        /* ==================== –î–ñ–ï–ö–ü–û–¢ ==================== */
        .jackpot-card {
            background: linear-gradient(135deg, var(--blue), var(--telegram-blue));
            border-radius: 16px;
            padding: 20px;
            margin: 20px auto;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .jackpot-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .jackpot-amount {
            font-size: clamp(28px, 6vw, 40px);
            font-weight: bold;
            color: var(--gold);
            margin: 8px 0;
        }
        
        /* ==================== –û–°–ù–û–í–ù–´–ï –ö–ù–û–ü–ö–ò ==================== */
        .main-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 24px 0;
            padding: 0 16px;
        }
        
        .main-btn {
            background: linear-gradient(145deg, var(--light-green), #28a745);
            color: white;
            border: none;
            padding: 16px 20px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .main-btn:active {
            transform: scale(0.97);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .main-btn.buy {
            background: linear-gradient(145deg, var(--gold), #e6b800);
            color: var(--text-dark);
            font-weight: 700;
            grid-column: 1 / -1;
        }
        
        .main-btn.rules {
            background: linear-gradient(145deg, var(--blue), #0056b3);
        }
        
        /* ==================== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ==================== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-overlay);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--dark-green);
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid var(--gold);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .modal-title {
            color: var(--gold);
            font-size: 20px;
            font-weight: 600;
        }
        
        .modal-close {
            background: var(--red);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-footer {
            padding: 20px 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        /* ==================== –í–´–ë–û–† –ß–ò–°–ï–õ ==================== */
        .numbers-selection {
            text-align: center;
        }
        
        .selection-info {
            margin-bottom: 20px;
        }
        
        .selected-count {
            font-size: 18px;
            color: var(--gold);
            margin-bottom: 16px;
        }
        
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 20px 0;
            justify-items: center;
        }
        
        @media (max-width: 480px) {
            .numbers-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 6px;
            }
        }
        
        @media (max-width: 360px) {
            .numbers-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }
        
        .number-btn {
            width: 44px;
            height: 44px;
            min-width: 40px;
            min-height: 40px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            background: var(--dark-green);
            color: var(--gold);
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        @media (max-width: 480px) {
            .number-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }
        
        .number-btn.selected {
            background: linear-gradient(145deg, var(--red), #ff4757);
            color: white;
            border-color: white;
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.5);
            transform: scale(1.05);
        }
        
        .number-btn:active:not(.selected) {
            transform: scale(0.95);
        }
        
        .quick-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .quick-btn {
            background: linear-gradient(145deg, var(--blue), var(--telegram-blue));
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 140px;
            justify-content: center;
        }
        
        .quick-btn.clear {
            background: linear-gradient(145deg, var(--red), #b02a37);
        }
        
        .buy-ticket-btn {
            background: linear-gradient(145deg, var(--gold), #e6b800);
            color: var(--text-dark);
            border: none;
            padding: 18px 30px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
        }
        
        .buy-ticket-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ==================== –ë–ò–õ–ï–¢–´ ==================== */
        .tickets-section {
            margin-top: 30px;
            flex: 1;
        }
        
        .section-title {
            color: var(--gold);
            font-size: 18px;
            margin-bottom: 16px;
            text-align: center;
        }
        
        .tickets-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 16px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .empty-tickets {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        .ticket-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .ticket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ticket-id {
            font-weight: bold;
            color: var(--gold);
        }
        
        .ticket-tiraj {
            color: var(--telegram-blue);
            font-weight: 600;
        }
        
        .ticket-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin: 10px 0;
            justify-content: center;
        }
        
        .ticket-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--light-green);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .ticket-number.winning {
            background: linear-gradient(145deg, #4CAF50, #2E7D32);
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.5);
        }
        
        .ticket-status {
            text-align: center;
            padding: 8px;
            border-radius: 6px;
            margin-top: 10px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .status-win {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }
        
        .status-lose {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border: 1px solid #f44336;
        }
        
        .status-pending {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
            border: 1px solid var(--gold);
        }
        
        /* ==================== –†–ï–ó–£–õ–¨–¢–ê–¢–´ ==================== */
        .result-modal .modal-content {
            max-width: 400px;
        }
        
        .result-icon {
            font-size: 60px;
            text-align: center;
            margin: 20px 0;
        }
        
        .win-icon {
            color: var(--gold);
            animation: bounce 1s infinite;
        }
        
        .lose-icon {
            color: var(--red);
            opacity: 0.8;
        }
        
        .result-title {
            text-align: center;
            font-size: 24px;
            margin: 16px 0;
            color: var(--gold);
        }
        
        .lose-title {
            color: var(--red);
        }
        
        .win-amount {
            font-size: 32px;
            font-weight: bold;
            color: var(--gold);
            text-align: center;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .ticket-summary {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .summary-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .summary-label {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .summary-value {
            color: var(--gold);
            font-weight: bold;
        }
        
        /* ==================== –ü–†–ê–í–ò–õ–ê ==================== */
        .rules-content {
            padding: 20px;
            line-height: 1.6;
        }
        
        .rules-section {
            margin-bottom: 20px;
        }
        
        .rules-section h3 {
            color: var(--gold);
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .rules-list {
            padding-left: 20px;
            margin-bottom: 10px;
        }
        
        .rules-list li {
            margin-bottom: 8px;
        }
        
        /* ==================== –ü–†–ï–õ–û–ê–î–ï–† ==================== */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-green);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        #preloader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loader {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 16px;
        }
        
        /* ==================== –ê–ù–ò–ú–ê–¶–ò–ò ==================== */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* ==================== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ü–ö ==================== */
        @media (min-width: 768px) {
            .main-controls {
                grid-template-columns: repeat(2, 1fr);
                max-width: 500px;
                margin: 24px auto;
            }
            
            .numbers-grid {
                grid-template-columns: repeat(9, 1fr);
                gap: 10px;
            }
            
            .number-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .modal-content {
                max-width: 600px;
            }
        }
        
        @media (min-width: 1024px) {
            .numbers-grid {
                grid-template-columns: repeat(10, 1fr);
            }
            
            .modal-content {
                max-width: 700px;
            }
            
            .main-controls {
                max-width: 600px;
            }
        }
        
        /* ==================== –¢–ï–õ–ï–ì–†–ê–ú –°–ü–ï–¶–ò–§–ò–ö–ê ==================== */
        body.telegram-mini-app {
            padding-top: max(16px, env(safe-area-inset-top));
            padding-bottom: max(16px, env(safe-area-inset-bottom));
        }
        
        /* ==================== –£–¢–ò–õ–ò–¢–´ ==================== */
        .hidden {
            display: none !important;
        }
        
        .stars-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: linear-gradient(145deg, var(--blue), var(--telegram-blue));
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.25);
        }
    </style>
</head>
<body>
    <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
    <div id="preloader">
        <div class="loader"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</p>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" class="hidden">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1>üé∞ –ö–ª–∞—Å—Å–∏–∫–∞ 6/45</h1>
            <div class="timer-container">
                <div class="timer-title">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–∏—Ä–∞–∂–∞:</div>
                <div class="timer" id="timer">09:59</div>
                <div class="timer-subtitle">–¢–∏—Ä–∞–∂ ‚Ññ<span id="currentTiraj">1</span></div>
            </div>
        </div>
        
        <!-- –î–∂–µ–∫–ø–æ—Ç -->
        <div class="jackpot-card">
            <div class="jackpot-label">–¢–ï–ö–£–©–ò–ô –î–ñ–ï–ö–ü–û–¢</div>
            <div class="jackpot-amount" id="jackpot">50,000 ‚òÖ</div>
            <div class="jackpot-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞: <span class="stars-badge">100 ‚òÖ</span></div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
        <div class="main-controls">
            <button class="main-btn buy" onclick="showNumberSelection()">
                <span>üé´</span> –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç
            </button>
            <button class="main-btn rules" onclick="showRulesModal()">
                <span>üìã</span> –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
            </button>
        </div>
        
        <!-- –ú–æ–∏ –±–∏–ª–µ—Ç—ã -->
        <div class="tickets-section">
            <div class="section-title">üé´ –ú–û–ò –ë–ò–õ–ï–¢–´</div>
            <div class="tickets-list" id="ticketsList">
                <div class="empty-tickets">
                    –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤.<br>
                    –ù–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç" –¥–ª—è —É—á–∞—Å—Ç–∏—è!
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —á–∏—Å–µ–ª -->
    <div id="numbersModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üéØ –í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª</div>
                <button class="modal-close" onclick="hideNumberSelection()">√ó</button>
            </div>
            
            <div class="modal-body numbers-selection">
                <div class="selection-info">
                    <div class="selected-count" id="selectedCount">–í—ã–±—Ä–∞–Ω–æ: 0/6</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 14px;">
                        –í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 45
                    </div>
                </div>
                
                <div class="numbers-grid" id="numbersGrid"></div>
                
                <div class="quick-controls">
                    <button class="quick-btn" onclick="quickPick()">
                        <span>üé≤</span> –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
                    </button>
                    <button class="quick-btn clear" onclick="clearSelection()">
                        <span>üóëÔ∏è</span> –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                </div>
                
                <button id="buyTicketBtn" class="buy-ticket-btn" onclick="buyTicket()" disabled>
                    üé´ –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç –∑–∞ 100 ‚òÖ
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∞–≤–∏–ª -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üìã –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</div>
                <button class="modal-close" onclick="hideRulesModal()">√ó</button>
            </div>
            
            <div class="modal-body rules-content">
                <div class="rules-section">
                    <h3>üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
                    <ul class="rules-list">
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 45</li>
                        <li>–°—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞: <strong>100 ‚òÖ</strong></li>
                        <li>–¢–∏—Ä–∞–∂–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –∫–∞–∂–¥—ã–µ <strong>10 –º–∏–Ω—É—Ç</strong></li>
                        <li>50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–∏–ª–µ—Ç–∞ –∏–¥–µ—Ç –≤ –¥–∂–µ–∫–ø–æ—Ç</li>
                    </ul>
                </div>
                
                <div class="rules-section">
                    <h3>üèÜ –í—ã–∏–≥—Ä—ã—à–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏</h3>
                    <ul class="rules-list">
                        <li>6 —á–∏—Å–µ–ª ‚Üí –í–µ—Å—å –¥–∂–µ–∫–ø–æ—Ç</li>
                        <li>5 —á–∏—Å–µ–ª ‚Üí 50,000 ‚òÖ</li>
                        <li>4 —á–∏—Å–ª–∞ ‚Üí 1,000 ‚òÖ</li>
                        <li>3 —á–∏—Å–ª–∞ ‚Üí 100 ‚òÖ</li>
                    </ul>
                </div>
                
                <div class="rules-section">
                    <h3>‚è∞ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</h3>
                    <ul class="rules-list">
                        <li>–ü—Ä–∏–µ–º —Å—Ç–∞–≤–æ–∫: –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–∏—Ä–∞–∂–∞</li>
                        <li>–¢–∏—Ä–∞–∂: –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç</li>
                        <li>–†–æ–∑—ã–≥—Ä—ã—à: –¥–ª–∏—Ç—Å—è 2 –º–∏–Ω—É—Ç—ã</li>
                        <li>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∞</li>
                    </ul>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="main-btn" onclick="hideRulesModal()" style="width: 100%;">
                    –ü–æ–Ω—è—Ç–Ω–æ, –∏–≥—Ä–∞—Ç—å!
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–∏–≥—Ä—ã—à–∞ -->
    <div id="winModal" class="modal result-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üéâ –ü–û–ë–ï–î–ê!</div>
                <button class="modal-close" onclick="hideResultModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="result-icon win-icon">üí∞</div>
                <div class="win-amount" id="winAmount">0 ‚òÖ</div>
                
                <div class="ticket-summary">
                    <div class="summary-row">
                        <span class="summary-label">–ë–∏–ª–µ—Ç:</span>
                        <span class="summary-value" id="winTicketId">#000000</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–¢–∏—Ä–∞–∂:</span>
                        <span class="summary-value" id="winTirajId">‚Ññ 001</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–í–∞—à–∏ —á–∏—Å–ª–∞:</span>
                        <span class="summary-value" id="winUserNumbers">1, 2, 3, 4, 5, 6</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–í—ã–ø–∞–≤—à–∏–µ —á–∏—Å–ª–∞:</span>
                        <span class="summary-value" id="winWinningNumbers">7, 8, 9, 10, 11, 12</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–°–æ–≤–ø–∞–¥–µ–Ω–∏–π:</span>
                        <span class="summary-value" id="winMatches">6 –∏–∑ 6</span>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="main-btn buy" onclick="hideResultModal(); showNumberSelection();" style="flex: 1;">
                    üé´ –ö—É–ø–∏—Ç—å –µ—â–µ –±–∏–ª–µ—Ç
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–∏–≥—Ä—ã—à–∞ -->
    <div id="loseModal" class="modal result-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title lose-title">üòî –ù–ï –ü–û–í–ï–ó–õ–û</div>
                <button class="modal-close" onclick="hideResultModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="result-icon lose-icon">üí´</div>
                <div style="text-align: center; margin: 20px 0; font-size: 18px;">
                    –í —ç—Ç–æ—Ç —Ä–∞–∑ –Ω–µ –ø–æ–≤–µ–∑–ª–æ!
                </div>
                
                <div class="ticket-summary">
                    <div class="summary-row">
                        <span class="summary-label">–ë–∏–ª–µ—Ç:</span>
                        <span class="summary-value" id="loseTicketId">#000000</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–¢–∏—Ä–∞–∂:</span>
                        <span class="summary-value" id="loseTirajId">‚Ññ 001</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–í–∞—à–∏ —á–∏—Å–ª–∞:</span>
                        <span class="summary-value" id="loseUserNumbers">1, 2, 3, 4, 5, 6</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–í—ã–ø–∞–≤—à–∏–µ —á–∏—Å–ª–∞:</span>
                        <span class="summary-value" id="loseWinningNumbers">7, 8, 9, 10, 11, 12</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">–°–æ–≤–ø–∞–¥–µ–Ω–∏–π:</span>
                        <span class="summary-value" id="loseMatches">0 –∏–∑ 6</span>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="main-btn buy" onclick="hideResultModal(); showNumberSelection();" style="flex: 1;">
                    üé´ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>
                <button class="main-btn rules" onclick="hideResultModal(); showRulesModal();" style="flex: 1;">
                    üìã –ü—Ä–∞–≤–∏–ª–∞
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò–ì–†–´ ====================
        const GAME_CONFIG = {
            totalNumbers: 45,
            numbersToSelect: 6,
            ticketPrice: 100,
            drawInterval: 10, // –º–∏–Ω—É—Ç
            drawDuration: 2,  // –º–∏–Ω—É—Ç
            initialJackpot: 50000,
            jackpotIncrementPercentage: 0.5,
            
            prizes: {
                3: 100,
                4: 1000,
                5: 50000,
                6: 'jackpot'
            }
        };
        
        // ==================== –ö–õ–ê–°–° –ò–ì–†–´ ====================
        class LotteryGame {
            constructor() {
                this.selectedNumbers = new Set();
                this.userTickets = [];
                this.currentTiraj = 1;
                this.jackpot = GAME_CONFIG.initialJackpot;
                this.nextDrawTime = null;
                this.drawStatus = 'waiting';
                this.isTelegram = false;
                this.drawTimer = null;
                
                this.init();
            }
            
            init() {
                console.log("üé∞ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...");
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram
                this.checkTelegram();
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
                this.loadFromStorage();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                this.initNumberGrid();
                this.setupDrawTimer();
                
                // –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–∞
                setTimeout(() => {
                    document.getElementById('preloader').classList.add('hidden');
                    document.getElementById('app').classList.remove('hidden');
                    this.updateUI();
                }, 1000);
            }
            
            checkTelegram() {
                if (window.Telegram && Telegram.WebApp) {
                    this.isTelegram = true;
                    Telegram.WebApp.ready();
                    Telegram.WebApp.expand();
                    document.body.classList.add('telegram-mini-app');
                    console.log("‚úÖ Telegram Web App –≥–æ—Ç–æ–≤");
                }
            }
            
            loadFromStorage() {
                try {
                    const saved = localStorage.getItem('lottery_game_data');
                    if (saved) {
                        const data = JSON.parse(saved);
                        this.userTickets = data.userTickets || [];
                        this.currentTiraj = data.currentTiraj || 1;
                        this.jackpot = data.jackpot || GAME_CONFIG.initialJackpot;
                        
                        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–∏—Ä–∞–∂–∞
                        if (data.nextDrawTime) {
                            this.nextDrawTime = new Date(data.nextDrawTime);
                            // –ï—Å–ª–∏ –≤—Ä–µ–º—è –ø—Ä–æ—à–ª–æ, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ
                            if (this.nextDrawTime < new Date()) {
                                this.createNextDrawTime();
                            }
                        } else {
                            this.createNextDrawTime();
                        }
                    } else {
                        this.createNextDrawTime();
                    }
                } catch (error) {
                    console.log("üì¶ –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ");
                    this.createNextDrawTime();
                }
            }
            
            saveToStorage() {
                const data = {
                    userTickets: this.userTickets,
                    currentTiraj: this.currentTiraj,
                    jackpot: this.jackpot,
                    nextDrawTime: this.nextDrawTime.toISOString()
                };
                localStorage.setItem('lottery_game_data', JSON.stringify(data));
            }
            
            createNextDrawTime() {
                const now = new Date();
                this.nextDrawTime = new Date(now.getTime() + GAME_CONFIG.drawInterval * 60000);
            }
            
            setupDrawTimer() {
                if (this.drawTimer) {
                    clearInterval(this.drawTimer);
                }
                
                this.drawTimer = setInterval(() => {
                    this.updateDrawTimer();
                }, 1000);
                
                this.updateDrawTimer();
            }
            
            updateDrawTimer() {
                const now = new Date();
                const diff = this.nextDrawTime - now;
                
                if (diff <= 0) {
                    // –í—Ä–µ–º—è —Ç–∏—Ä–∞–∂–∞
                    if (this.drawStatus === 'waiting') {
                        this.startDraw();
                    }
                    
                    const drawTimePassed = Math.abs(diff) / 1000;
                    const drawTimeLeft = GAME_CONFIG.drawDuration * 60 - drawTimePassed;
                    
                    if (drawTimeLeft <= 0) {
                        this.finishDraw();
                    } else {
                        this.updateTimerDisplay('drawing', drawTimeLeft);
                    }
                } else {
                    this.updateTimerDisplay('waiting', diff / 1000);
                }
            }
            
            updateTimerDisplay(status, seconds) {
                const timerElement = document.getElementById('timer');
                const tirajElement = document.getElementById('currentTiraj');
                
                if (!timerElement) return;
                
                if (status === 'drawing') {
                    this.drawStatus = 'drawing';
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    timerElement.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                    timerElement.style.color = '#ff4757';
                    if (tirajElement) {
                        tirajElement.textContent = this.formatTirajId(this.currentTiraj) + ' (—Ä–æ–∑—ã–≥—Ä—ã—à)';
                    }
                } else {
                    this.drawStatus = 'waiting';
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    timerElement.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                    timerElement.style.color = '#ffd700';
                    if (tirajElement) {
                        tirajElement.textContent = this.formatTirajId(this.currentTiraj);
                    }
                }
            }
            
            startDraw() {
                console.log(`üé∞ –ù–∞—á–∞–ª–æ —Ç–∏—Ä–∞–∂–∞ ${this.currentTiraj}`);
                this.drawStatus = 'drawing';
                this.showNotification(`üé∞ –¢–∏—Ä–∞–∂ ${this.formatTirajId(this.currentTiraj)} –Ω–∞—á–∞–ª—Å—è!`);
            }
            
            finishDraw() {
                console.log(`üé∞ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–∏—Ä–∞–∂–∞ ${this.currentTiraj}`);
                
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö —á–∏—Å–µ–ª
                const winningNumbers = this.generateWinningNumbers();
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–ª–µ—Ç–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ —Ç–∏—Ä–∞–∂–∞
                let hasJackpotWinner = false;
                const tirajTickets = this.userTickets.filter(t => t.tirajId === this.currentTiraj);
                
                for (const ticket of tirajTickets) {
                    if (ticket.status === 'pending') {
                        const matchedNumbers = ticket.numbers.filter(num => winningNumbers.includes(num));
                        ticket.winningNumbers = winningNumbers;
                        ticket.matchedNumbers = matchedNumbers;
                        
                        if (matchedNumbers.length >= 3) {
                            ticket.status = 'win';
                            ticket.winAmount = this.calculateWinAmount(matchedNumbers.length);
                            
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–∂–µ–∫–ø–æ—Ç
                            if (matchedNumbers.length === 6) {
                                hasJackpotWinner = true;
                                ticket.winAmount = this.jackpot;
                            }
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                            setTimeout(() => this.showWinResult(ticket), 500);
                        } else {
                            ticket.status = 'lose';
                            setTimeout(() => this.showLoseResult(ticket), 500);
                        }
                    }
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç–∞
                if (hasJackpotWinner) {
                    this.jackpot = GAME_CONFIG.initialJackpot; // –°–±—Ä–æ—Å –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ
                } else {
                    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–∂–µ–∫–ø–æ—Ç –Ω–∞ 50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤—Å–µ—Ö –±–∏–ª–µ—Ç–æ–≤ —Ç–∏—Ä–∞–∂–∞
                    this.jackpot += tirajTickets.length * GAME_CONFIG.ticketPrice * GAME_CONFIG.jackpotIncrementPercentage;
                }
                
                // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–∏—Ä–∞–∂–∞
                this.currentTiraj++;
                this.createNextDrawTime();
                this.drawStatus = 'waiting';
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                this.saveToStorage();
                this.updateUI();
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                this.showNotification(`‚úÖ –¢–∏—Ä–∞–∂ ${this.formatTirajId(this.currentTiraj - 1)} –∑–∞–≤–µ—Ä—à–µ–Ω! –í—ã–ø–∞–ª–∏ —á–∏—Å–ª–∞: ${winningNumbers.join(', ')}`);
            }
            
            generateWinningNumbers() {
                const numbers = [];
                while (numbers.length < 6) {
                    const num = Math.floor(Math.random() * GAME_CONFIG.totalNumbers) + 1;
                    if (!numbers.includes(num)) {
                        numbers.push(num);
                    }
                }
                return numbers.sort((a, b) => a - b);
            }
            
            calculateWinAmount(matchedCount) {
                if (matchedCount === 6) {
                    return this.jackpot;
                }
                return GAME_CONFIG.prizes[matchedCount] || 0;
            }
            
            initNumberGrid() {
                const grid = document.getElementById('numbersGrid');
                if (!grid) return;
                
                grid.innerHTML = '';
                
                for (let i = 1; i <= GAME_CONFIG.totalNumbers; i++) {
                    const button = document.createElement('button');
                    button.className = 'number-btn';
                    button.textContent = i;
                    button.dataset.number = i;
                    button.addEventListener('click', () => this.toggleNumber(i));
                    grid.appendChild(button);
                }
            }
            
            toggleNumber(number) {
                if (this.selectedNumbers.has(number)) {
                    this.selectedNumbers.delete(number);
                } else {
                    if (this.selectedNumbers.size >= GAME_CONFIG.numbersToSelect) {
                        this.showNotification(`–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ ${GAME_CONFIG.numbersToSelect} —á–∏—Å–µ–ª`);
                        return;
                    }
                    this.selectedNumbers.add(number);
                }
                
                this.updateNumberButtons();
                this.updateSelectedCount();
            }
            
            updateNumberButtons() {
                const buttons = document.querySelectorAll('.number-btn');
                buttons.forEach(btn => {
                    const num = parseInt(btn.dataset.number);
                    btn.classList.toggle('selected', this.selectedNumbers.has(num));
                });
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–æ–∫—É–ø–∫–∏
                const buyBtn = document.getElementById('buyTicketBtn');
                if (buyBtn) {
                    const canBuy = this.selectedNumbers.size === GAME_CONFIG.numbersToSelect;
                    buyBtn.disabled = !canBuy;
                }
            }
            
            updateSelectedCount() {
                const element = document.getElementById('selectedCount');
                if (element) {
                    const count = this.selectedNumbers.size;
                    element.textContent = `–í—ã–±—Ä–∞–Ω–æ: ${count}/${GAME_CONFIG.numbersToSelect}`;
                    element.style.color = count === GAME_CONFIG.numbersToSelect ? '#4CAF50' : 
                                         count > 0 ? '#FFD700' : '#f44336';
                }
            }
            
            quickPick() {
                this.selectedNumbers.clear();
                const allNumbers = Array.from({length: GAME_CONFIG.totalNumbers}, (_, i) => i + 1);
                const shuffled = [...allNumbers].sort(() => Math.random() - 0.5);
                
                for (let i = 0; i < GAME_CONFIG.numbersToSelect; i++) {
                    this.selectedNumbers.add(shuffled[i]);
                }
                
                this.updateNumberButtons();
                this.updateSelectedCount();
                this.showNotification('üé≤ –í—ã–±—Ä–∞–Ω—ã —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞!');
            }
            
            clearSelection() {
                this.selectedNumbers.clear();
                this.updateNumberButtons();
                this.updateSelectedCount();
                this.showNotification('üóëÔ∏è –í—ã–±–æ—Ä –æ—á–∏—â–µ–Ω!');
            }
            
            buyTicket() {
                if (this.selectedNumbers.size !== GAME_CONFIG.numbersToSelect) {
                    this.showNotification(`–ù—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ä–æ–≤–Ω–æ ${GAME_CONFIG.numbersToSelect} —á–∏—Å–µ–ª!`);
                    return;
                }
                
                if (this.drawStatus === 'drawing') {
                    this.showNotification('‚ùå –ü—Ä–∏–µ–º —Å—Ç–∞–≤–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω! –¢–∏—Ä–∞–∂ —É–∂–µ –Ω–∞—á–∞–ª—Å—è');
                    return;
                }
                
                const ticketId = this.generateTicketId();
                const numbers = Array.from(this.selectedNumbers).sort((a, b) => a - b);
                
                const ticket = {
                    id: ticketId,
                    tirajId: this.currentTiraj,
                    numbers: numbers,
                    purchaseTime: new Date().toISOString(),
                    drawTime: this.nextDrawTime.toISOString(),
                    winningNumbers: [],
                    matchedNumbers: [],
                    winAmount: 0,
                    status: 'pending',
                    formattedId: this.formatTicketId(ticketId),
                    formattedTirajId: this.formatTirajId(this.currentTiraj)
                };
                
                this.userTickets.unshift(ticket);
                
                // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç–∞ (50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–∏–ª–µ—Ç–∞)
                this.jackpot += GAME_CONFIG.ticketPrice * GAME_CONFIG.jackpotIncrementPercentage;
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                this.saveToStorage();
                this.updateUI();
                
                // –û—á–∏—Å—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
                this.clearSelection();
                hideNumberSelection();
                
                this.showNotification(`üé´ –ë–∏–ª–µ—Ç ${ticket.formattedId} –∫—É–ø–ª–µ–Ω! –£—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏—Ä–∞–∂–µ ${ticket.formattedTirajId}`);
            }
            
            generateTicketId() {
                const timestamp = Date.now();
                const random = Math.floor(Math.random() * 1000);
                return parseInt(`${timestamp}${random}`.slice(-9));
            }
            
            formatTicketId(id) {
                const str = id.toString().padStart(9, '0');
                return `#${str.slice(0, 3)} ${str.slice(3, 6)} ${str.slice(6, 9)}`;
            }
            
            formatTirajId(id) {
                return id.toString().padStart(3, '0');
            }
            
            showWinResult(ticket) {
                const modal = document.getElementById('winModal');
                if (!modal) return;
                
                // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
                document.getElementById('winTicketId').textContent = ticket.formattedId;
                document.getElementById('winTirajId').textContent = `‚Ññ ${ticket.formattedTirajId}`;
                document.getElementById('winUserNumbers').textContent = ticket.numbers.join(', ');
                document.getElementById('winWinningNumbers').textContent = ticket.winningNumbers.join(', ');
                document.getElementById('winMatches').textContent = `${ticket.matchedNumbers.length} –∏–∑ 6`;
                document.getElementById('winAmount').textContent = `${ticket.winAmount} ‚òÖ`;
                
                // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª–∫–∏
                showModal('winModal');
                
                // –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞
                if (typeof playWinSound === 'function') {
                    playWinSound();
                }
            }
            
            showLoseResult(ticket) {
                const modal = document.getElementById('loseModal');
                if (!modal) return;
                
                // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
                document.getElementById('loseTicketId').textContent = ticket.formattedId;
                document.getElementById('loseTirajId').textContent = `‚Ññ ${ticket.formattedTirajId}`;
                document.getElementById('loseUserNumbers').textContent = ticket.numbers.join(', ');
                document.getElementById('loseWinningNumbers').textContent = ticket.winningNumbers.join(', ');
                document.getElementById('loseMatches').textContent = `${ticket.matchedNumbers.length} –∏–∑ 6`;
                
                // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª–∫–∏
                showModal('loseModal');
                
                // –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞
                if (typeof playLoseSound === 'function') {
                    playLoseSound();
                }
            }
            
            updateUI() {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç–∞
                const jackpotElement = document.getElementById('jackpot');
                if (jackpotElement) {
                    jackpotElement.textContent = `${Math.round(this.jackpot).toLocaleString()} ‚òÖ`;
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±–∏–ª–µ—Ç–æ–≤
                this.updateTicketsList();
            }
            
            updateTicketsList() {
                const container = document.getElementById('ticketsList');
                if (!container) return;
                
                if (this.userTickets.length === 0) {
                    container.innerHTML = `
                        <div class="empty-tickets">
                            –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤.<br>
                            –ù–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç" –¥–ª—è —É—á–∞—Å—Ç–∏—è!
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = '';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –±–∏–ª–µ—Ç–æ–≤
                this.userTickets.slice(0, 10).forEach(ticket => {
                    const ticketElement = this.createTicketElement(ticket);
                    container.appendChild(ticketElement);
                });
            }
            
            createTicketElement(ticket) {
                const div = document.createElement('div');
                div.className = 'ticket-card';
                
                const drawTime = new Date(ticket.drawTime);
                const timeStr = drawTime.toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                let statusText = '';
                let statusClass = '';
                
                if (ticket.status === 'win') {
                    statusText = `üéâ –í—ã–∏–≥—Ä—ã—à: ${ticket.winAmount} ‚òÖ`;
                    statusClass = 'status-win';
                } else if (ticket.status === 'lose') {
                    statusText = '‚ùå –ë–µ–∑ –≤—ã–∏–≥—Ä—ã—à–∞';
                    statusClass = 'status-lose';
                } else {
                    statusText = '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ç–∏—Ä–∞–∂–∞';
                    statusClass = 'status-pending';
                }
                
                div.innerHTML = `
                    <div class="ticket-header">
                        <div class="ticket-id">${ticket.formattedId}</div>
                        <div class="ticket-tiraj">–¢–∏—Ä–∞–∂ ${ticket.formattedTirajId}</div>
                    </div>
                    
                    <div class="ticket-numbers">
                        ${ticket.numbers.map(num => {
                            const isWinning = ticket.winningNumbers.includes(num);
                            const isMatched = ticket.matchedNumbers.includes(num);
                            let className = 'ticket-number';
                            if (isMatched) className += ' winning';
                            
                            return `<div class="${className}">${num}</div>`;
                        }).join('')}
                    </div>
                    
                    <div class="ticket-status ${statusClass}">
                        ${statusText}
                    </div>
                    
                    <div style="text-align: center; font-size: 12px; color: rgba(255,255,255,0.5); margin-top: 8px;">
                        ${timeStr}
                    </div>
                `;
                
                return div;
            }
            
            showNotification(message) {
                console.log('üîî', message);
                
                if (this.isTelegram && window.Telegram?.WebApp) {
                    Telegram.WebApp.showAlert(message);
                } else {
                    alert(message);
                }
            }
        }
        
        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –§–£–ù–ö–¶–ò–ò ====================
        let game = null;
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }
        
        function showNumberSelection() {
            if (game) {
                game.updateSelectedCount();
                game.updateNumberButtons();
            }
            showModal('numbersModal');
        }
        
        function hideNumberSelection() {
            hideModal('numbersModal');
        }
        
        function showRulesModal() {
            showModal('rulesModal');
        }
        
        function hideRulesModal() {
            hideModal('rulesModal');
        }
        
        function hideResultModal() {
            hideModal('winModal');
            hideModal('loseModal');
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        function quickPick() {
            if (game) game.quickPick();
        }
        
        function clearSelection() {
            if (game) game.clearSelection();
        }
        
        function buyTicket() {
            if (game) game.buyTicket();
        }
        
        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        function playWinSound() {
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ');
                audio.volume = 0.3;
                audio.play();
            } catch (e) {
                console.log('üîä –ó–≤—É–∫ –≤—ã–∏–≥—Ä—ã—à–∞');
            }
        }
        
        function playLoseSound() {
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ');
                audio.volume = 0.3;
                audio.play();
            } catch (e) {
                console.log('üîä –ó–≤—É–∫ –ø—Ä–æ–∏–≥—Ä—ã—à–∞');
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
        document.addEventListener('click', (event) => {
            if (event.target.classList.contains('modal')) {
                hideModal(event.target.id);
            }
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                hideModal('numbersModal');
                hideModal('rulesModal');
                hideResultModal();
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', () => {
            game = new LotteryGame();
        });
    </script>
</body>
</html>
