<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <!-- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –ú–ï–¢–ê-–¢–ï–ì–ò –î–õ–Ø –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#0a5c36">
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <title>üé∞ –ö–ª–∞—Å—Å–∏–∫–∞ 6/45 - Telegram Lottery</title>
    <style>
        /* –ö–∞–∑–∏–Ω–æ-—Å—Ç–∏–ª—å —Å –∑–µ–ª–µ–Ω—ã–º —Ñ–æ–Ω–æ–º –∏ Telegram Stars - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô */
        
        :root {
            --casino-dark-green: #0a5c36;
            --casino-green: #1e7e34;
            --casino-light-green: #28a745;
            --casino-gold: #ffd700;
            --casino-red: #dc3545;
            --casino-blue: #0088cc;
            --casino-purple: #6f42c1;
            --telegram-blue: #34b7f1;
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --shadow-dark: rgba(0, 0, 0, 0.5);
            
            /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - –£–ü–†–û–©–ï–ù–ù–´–ï */
            --container-padding: 12px;
            --number-btn-size: 44px;
            --grid-columns: 7;
            --font-size-base: 15px;
            --h1-size: 2.2rem;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            backface-visibility: hidden;
        }
        
        html {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: #0a5c36; /* –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô —Ü–≤–µ—Ç –≤–º–µ—Å—Ç–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
            color: var(--text-light);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            position: relative;
            overflow-x: hidden;
            font-size: var(--font-size-base);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: pan-y;
            padding: 0;
            width: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Telegram Mini App —Å—Ç–∏–ª–∏ - –£–ü–†–û–©–ï–ù–ù–´–ï */
        body.telegram-mini-app {
            background: #0a5c36 !important; /* –¢–æ–ª—å–∫–æ —Ü–≤–µ—Ç, –±–µ–∑ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
            touch-action: manipulation;
        }
        
        /* –£–ü–†–û–©–ï–ù–ù–´–ô –≠–§–§–ï–ö–¢ –ö–ê–ó–ò–ù–û - —Ç–æ–ª—å–∫–æ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ */
        body:not(.telegram-mini-app)::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(220, 53, 69, 0.1) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }
        
        /* –£–ë–ò–†–ê–ï–ú –°–õ–û–ñ–ù–´–ï –ê–ù–ò–ú–ê–¶–ò–ò –ß–ê–°–¢–ò–¶ */
        body::after {
            display: none;
        }
        
        .lottery-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--container-padding);
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 20px var(--shadow-dark);
            position: relative;
            overflow: hidden;
            width: calc(100% - 16px);
            min-height: calc(100vh - 24px);
            margin-top: 8px;
            margin-bottom: 8px;
        }
        
        body.telegram-mini-app .lottery-container {
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            background: rgba(10, 92, 54, 0.95) !important;
            width: 100%;
            margin: 0;
            border-radius: 0;
            min-height: 100vh;
            padding-bottom: max(12px, env(safe-area-inset-bottom));
        }
        
        /* –£–ë–ò–†–ê–ï–ú –°–õ–û–ñ–ù–£–Æ –ê–ù–ò–ú–ê–¶–ò–Æ –ë–õ–ï–°–ö–ê */
        .lottery-container::before {
            display: none;
        }
        
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤ —Å—Ç–∏–ª–µ –∫–∞–∑–∏–Ω–æ - –£–ü–†–û–©–ï–ù–ù–´–ô */
        h1 {
            text-align: center;
            font-size: var(--h1-size);
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--casino-gold), #ffed4e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            padding-bottom: 12px;
            line-height: 1.2;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--casino-gold), transparent);
        }
        
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .header-section p {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            flex: 1;
            min-width: 180px;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø—Ä–∞–≤–∏–ª –≤ —Å—Ç–∏–ª–µ –∫–∞–∑–∏–Ω–æ - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .rules-btn {
            background: linear-gradient(145deg, var(--casino-blue), var(--casino-purple));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            flex-shrink: 0;
            min-height: 44px;
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .rules-btn:active {
            transform: scale(0.96);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* –£–ë–ò–†–ê–ï–ú HOVER –≠–§–§–ï–ö–¢–´ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
        @media (hover: none) {
            .rules-btn:hover {
                transform: none;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            }
        }
        
        @media (hover: hover) {
            .rules-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
            }
        }
        
        /* –ò–Ω—Ñ–æ –ø–∞–Ω–µ–ª—å —Å –∑–≤–µ–∑–¥–∞–º–∏ - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .stars-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            background: rgba(0, 136, 204, 0.15);
            padding: 12px 16px;
            border-radius: 12px;
            margin: 16px 0;
            border: 1px solid rgba(52, 183, 241, 0.25);
            flex-wrap: wrap;
        }
        
        .stars-info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 140px;
        }
        
        .jackpot-star {
            font-size: 1.8rem;
            color: var(--casino-gold);
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }
        
        /* –£–ë–ò–†–ê–ï–ú –ê–ù–ò–ú–ê–¶–ò–Æ –ó–í–ï–ó–î–´ */
        @keyframes starGlow {
            from { text-shadow: 0 0 8px rgba(255, 215, 0, 0.5); }
            to { text-shadow: 0 0 12px rgba(255, 215, 0, 0.7); }
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            align-items: center;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            justify-content: center;
        }
        
        .control-btn {
            background: linear-gradient(145deg, var(--casino-blue), #0056b3);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.15s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            min-height: 44px;
            flex: 1;
            min-width: 140px;
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .control-btn:active {
            transform: scale(0.96);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }
        
        /* –£–ë–ò–†–ê–ï–ú HOVER –≠–§–§–ï–ö–¢–´ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
        @media (hover: none) {
            .control-btn:hover {
                transform: none;
                box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            }
        }
        
        @media (hover: hover) {
            .control-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
            }
        }
        
        .control-btn.quick-pick {
            background: linear-gradient(145deg, var(--casino-green), #1a6b2c);
        }
        
        .control-btn.clear {
            background: linear-gradient(145deg, var(--casino-red), #b02a37);
        }
        
        .control-btn.play {
            background: linear-gradient(145deg, var(--casino-gold), #e6b800);
            color: var(--text-dark);
            font-size: 1rem;
            padding: 12px 24px;
            font-weight: 700;
        }
        
        .control-btn.play:active {
            transform: scale(0.96);
        }
        
        @media (hover: hover) {
            .control-btn.play:hover {
                background: linear-gradient(145deg, #ffed4e, var(--casino-gold));
            }
        }
        
        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è Telegram Stars - –£–ü–†–û–©–ï–ù–ù–´–ô */
        .stars-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            background: linear-gradient(145deg, #0088cc, var(--telegram-blue));
            color: white;
            padding: 5px 12px;
            border-radius: 16px;
            font-weight: bold;
            font-size: 0.85rem;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            min-width: 60px;
        }
        
        .star-icon {
            color: #ffd700;
            font-size: 1em;
        }
        
        /* –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ - –£–ü–†–û–©–ï–ù–ù–´–ô */
        .select-style {
            padding: 10px 16px;
            border-radius: 8px;
            border: 1px solid var(--casino-gold);
            background: rgba(0, 0, 0, 0.25);
            color: white;
            font-size: 0.95rem;
            cursor: pointer;
            outline: none;
            transition: all 0.15s ease;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' fill='%23ffd700' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 10px;
            padding-right: 32px;
            min-height: 44px;
            flex: 1;
            min-width: 180px;
            touch-action: manipulation;
        }
        
        .select-style:focus {
            border-color: var(--casino-light-green);
            box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.3);
        }
        
        .select-style option {
            background: var(--casino-dark-green);
            color: white;
            padding: 8px;
        }
        
        /* –°–µ—Ç–∫–∞ –Ω–æ–º–µ—Ä–æ–≤ –≤ —Å—Ç–∏–ª–µ –∫–∞–∑–∏–Ω–æ - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø */
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(var(--grid-columns), 1fr);
            gap: 8px;
            margin: 20px 0;
            padding: 12px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.15);
            justify-items: center;
            max-height: none !important;
            overflow: visible !important;
            width: 100%;
        }
        
        .number-btn {
            width: var(--number-btn-size);
            height: var(--number-btn-size);
            min-width: 40px;
            min-height: 40px;
            border: 2px solid var(--casino-gold);
            border-radius: 50%;
            background: linear-gradient(145deg, var(--casino-dark-green), var(--casino-green));
            color: var(--casino-gold);
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
            user-select: none;
            -webkit-appearance: none;
            aspect-ratio: 1 / 1;
        }
        
        .number-btn:active {
            transform: scale(0.92);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
        }
        
        /* –£–ë–ò–†–ê–ï–ú –°–õ–û–ñ–ù–´–ô –≠–§–§–ï–ö–¢ –ë–õ–ï–°–ö–ê */
        .number-btn::before {
            display: none;
        }
        
        /* –£–ë–ò–†–ê–ï–ú HOVER –≠–§–§–ï–ö–¢–´ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
        @media (hover: none) {
            .number-btn:hover {
                transform: none;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            }
        }
        
        @media (hover: hover) {
            .number-btn:hover {
                transform: scale(1.05);
                background: linear-gradient(145deg, var(--casino-green), var(--casino-light-green));
                box-shadow: 0 3px 8px rgba(255, 215, 0, 0.3);
            }
        }
        
        .number-btn.selected {
            background: linear-gradient(145deg, var(--casino-red), #ff4757);
            color: white;
            border-color: white;
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.5);
            animation: pulse 1.2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        body.telegram-mini-app .number-btn.selected {
            animation: none;
        }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã - –£–ü–†–û–©–ï–ù–ù–´–ï */
        .game-info {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        #selectedNumbers {
            font-size: 1rem;
            font-weight: bold;
            color: var(--casino-gold);
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            border-left: 3px solid var(--casino-gold);
            text-align: center;
        }
        
        .result {
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin: 12px 0;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .result h3 {
            color: var(--casino-gold);
            margin-bottom: 12px;
            font-size: 1.3rem;
            text-align: center;
        }
        
        .winning-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            justify-content: center;
            margin: 16px 0;
            padding: 12px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 8px;
        }
        
        .winning-numbers strong {
            color: var(--casino-gold);
            font-size: 1rem;
            width: 100%;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .winning-numbers span {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 42px;
            height: 42px;
            background: linear-gradient(145deg, var(--casino-red), #ff4757);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 6px rgba(220, 53, 69, 0.3);
        }
        
        body.telegram-mini-app .winning-numbers span {
            animation: none;
        }
        
        .win {
            color: #4CAF50;
            font-weight: bold;
            font-size: 1.1rem;
            padding: 12px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            border-left: 3px solid #4CAF50;
            text-align: center;
        }
        
        .lose {
            color: #f44336;
            font-weight: bold;
            font-size: 1.1rem;
            padding: 12px;
            background: rgba(244, 67, 54, 0.1);
            border-radius: 8px;
            border-left: 4px solid #f44336;
            text-align: center;
        }
        
        /* –ü—Ä–µ–ª–æ–∞–¥–µ—Ä */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a5c36;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        .preloader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .preloader .loader {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--casino-gold);
            animation: spin 0.8s linear infinite;
            margin-bottom: 16px;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∞–≤–∏–ª - –£–ü–†–û–©–ï–ù–ù–û–ï */
        .rules-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .rules-content {
            background: #0a3c24;
            margin: 5% auto;
            padding: 20px;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            border: 2px solid var(--casino-gold);
            position: relative;
        }
        
        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Ö–æ–∂–∏–º–∏, –Ω–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º–∏ */
        
        /* ==================== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ==================== */
        
        /* –¢–µ–ª–µ–≥—Ä–∞–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
        body.telegram-mini-app {
            --grid-columns: 7;
            --number-btn-size: 42px;
        }
        
        /* –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã */
        @media (max-width: 374px) {
            :root {
                --grid-columns: 6;
                --number-btn-size: 40px;
                --h1-size: 1.9rem;
                --container-padding: 10px;
            }
            
            .numbers-grid {
                gap: 6px;
            }
        }
        
        /* –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –º–∞–ª–µ–Ω—å–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
        @media (max-width: 319px) {
            :root {
                --grid-columns: 5;
                --number-btn-size: 38px;
            }
        }
        
        /* –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
        @media (orientation: landscape) and (max-height: 600px) {
            :root {
                --number-btn-size: 36px;
                --h1-size: 1.8rem;
            }
            
            .numbers-grid {
                grid-template-columns: repeat(9, 1fr);
                gap: 6px;
            }
        }
        
        /* –í—ã—Å–æ–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
        @media (min-height: 1000px) {
            :root {
                --number-btn-size: 48px;
            }
        }
        
        /* –°–Ω–∏–∂–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            max-width: calc(100vw - 40px);
        }
        
        .result-details {
            background: rgba(0, 0, 0, 0.15);
            padding: 16px;
            border-radius: 8px;
            margin: 12px 0;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }
        
        .result-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .result-item .label {
            color: var(--casino-gold);
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .result-item .value {
            font-weight: bold;
            color: white;
            font-size: 1rem;
        }
        
        .winning-number.matched {
            background: linear-gradient(145deg, #4CAF50, #2E7D32) !important;
            box-shadow: 0 0 12px rgba(76, 175, 80, 0.5) !important;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è JS - –£–ü–†–û–©–ï–ù–ù–´–ï */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }
        
        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease forwards;
        }
        
        .bounce {
            animation: bounce 0.3s ease;
        }
        
        .shake {
            animation: shake 0.3s ease;
        }
        
        .pop-in {
            animation: popIn 0.2s ease forwards;
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loader {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--casino-gold);
            animation: spin 0.8s linear infinite;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 10px 16px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            transform: translateX(100%);
            transition: transform 0.25s ease;
            max-width: 280px;
            font-size: 0.9rem;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 3px solid #4CAF50;
        }
        
        .notification.error {
            border-left: 3px solid #f44336;
        }
        
        .notification.warning {
            border-left: 3px solid #ff9800;
        }
        
        /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è iOS */
        @supports (-webkit-touch-callout: none) {
            body {
                -webkit-overflow-scrolling: touch;
            }
            
            .number-btn {
                cursor: pointer;
            }
        }
        
        /* –§–∏–∫—Å –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤ Telegram */
        body.telegram-mini-app .numbers-grid {
            overflow: visible;
            max-height: none;
            min-height: auto;
        }
        
        /* –£–ª—É—á—à–∞–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
        @media (max-width: 768px) {
            .number-btn.selected {
                animation-duration: 1.5s;
            }
        }
    </style>
</head>
<body>
    <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
    <div id="preloader" class="preloader">
        <div class="loader"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</p>
    </div>
    
    <div class="lottery-container">
        <h1>üé∞ –ö–ª–∞—Å—Å–∏–∫–∞ 6/45</h1>
        
        <div class="header-section">
            <p>–í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 45</p>
            <button onclick="showRules()" class="rules-btn">
                <span>üìã</span> –ü—Ä–∞–≤–∏–ª–∞
            </button>
        </div>
        
        <div class="stars-info">
            <div class="stars-info-item">
                <span class="jackpot-star">‚≠ê</span>
                <span>–î–ñ–ï–ö–ü–û–¢: <span class="stars-badge">1,000,000 <span class="star-icon">‚òÖ</span></span></span>
            </div>
            <div class="stars-info-item" style="justify-content: flex-end;">
                <span>–°—Ç–∞–≤–∫–∞: <span class="stars-badge">100 <span class="star-icon">‚òÖ</span></span></span>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="quickPick()" class="control-btn quick-pick">
                <span>üé≤</span> –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä
            </button>
            <button onclick="clearSelection()" class="control-btn clear">
                <span>üóëÔ∏è</span> –û—á–∏—Å—Ç–∏—Ç—å
            </button>
            <button onclick="playGame()" id="playBtn" class="control-btn play">
                <span>‚≠ê</span> –ò–≥—Ä–∞—Ç—å –∑–∞ <span class="stars-badge">100 <span class="star-icon">‚òÖ</span></span>
            </button>
            <select id="betType" class="select-style">
                <option value="simple">–ü—Ä–æ—Å—Ç–∞—è —Å—Ç–∞–≤–∫–∞</option>
                <option value="expanded">–†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è (7-12 —á–∏—Å–µ–ª)</option>
            </select>
        </div>
        
        <div class="numbers-grid" id="numbersGrid"></div>
        
        <div class="game-info">
            <div id="selectedNumbers">–í—ã–±—Ä–∞–Ω–æ: 0/6</div>
            <div id="result" class="result"></div>
            <div id="winningNumbers" class="winning-numbers"></div>
        </div>
        
        <!-- –¢–µ–ª–µ–≥—Ä–∞–º –±–∞–ª–∞–Ω—Å (—Ç–æ–ª—å–∫–æ –≤ Mini App) -->
        <div id="telegramBalance" style="display: none; margin-top: 20px; text-align: center;">
            <div class="telegram-balance" style="display: inline-flex; align-items: center; gap: 10px; padding: 10px 20px; background: rgba(52, 183, 241, 0.1); border-radius: 10px; border: 1px solid rgba(52, 183, 241, 0.3);">
                <span>–ë–∞–ª–∞–Ω—Å Telegram Stars:</span>
                <span class="stars-badge" id="telegramStarsBalance">0 ‚òÖ</span>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ -->
    <div id="rulesModal" class="rules-modal">
        <div class="rules-content">
            <div class="rules-header">
                <h2>üìã –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã ¬´–ö–ª–∞—Å—Å–∏–∫–∞ 6/45¬ª</h2>
                <span class="rules-close" onclick="hideRules()">&times;</span>
            </div>
            
            <div class="rules-section">
                <h3>üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
                <ul class="rules-list">
                    <li><strong>–¶–µ–ª—å –∏–≥—Ä—ã:</strong> –£–≥–∞–¥–∞—Ç—å –æ—Ç 3 –¥–æ 6 —á–∏—Å–µ–ª –∏–∑ 45</li>
                    <li><strong>–í—ã–±–æ—Ä —á–∏—Å–µ–ª:</strong> –ò–≥—Ä–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç 6 —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 45</li>
                    <li><strong>–¢–∏—Ä–∞–∂:</strong> –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–ø–∞–¥–∞–µ—Ç 6 –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö —á–∏—Å–µ–ª</li>
                    <li><strong>–°—Ç–∞–≤–∫–∞:</strong> <span class="stars-badge">100 <span class="star-icon">‚òÖ</span></span> –∑–∞ –±–∏–ª–µ—Ç</li>
                    <li><strong>–ß–∞—Å—Ç–æ—Ç–∞ —Ç–∏—Ä–∞–∂–µ–π:</strong> –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 20:00</li>
                </ul>
            </div>
            
            <!-- –û—Å—Ç–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∞–≤–∏–ª... -->
            
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="hideRules()" class="control-btn play" style="padding: 12px 30px;">
                    <span>‚≠ê</span> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É!
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript –∫–æ–¥ - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô -->
    <script>
        'use strict';
        
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò–ì–†–´ ====================
        const GAME_CONFIG = {
            totalNumbers: 45,
            numbersToSelect: 6,
            minExpanded: 7,
            maxExpanded: 12,
            ticketPrice: 100,
            minAge: 18,
            maxDailyBet: 10000,
            drawTime: "20:00",
            jackpot: 1000000,
            
            prizes: {
                3: 100,
                4: 1000,
                5: 50000,
                6: 1000000
            },
            
            probabilities: {
                3: "1:57",
                4: "1:733",
                5: "1:34,808",
                6: "1:8,145,060"
            },
            
            expandedBonus: 1.5,
            maxTicketsPerDraw: 10,
            autoPickIfEmpty: true,
            showAnimations: true,
            soundEffects: false, // –û—Ç–∫–ª—é—á–∞–µ–º –∑–≤—É–∫–∏ –¥–ª—è Telegram
            fastMode: false // –†–µ–∂–∏–º —É—Å–∫–æ—Ä–µ–Ω–Ω–æ–π –∏–≥—Ä—ã
        };

        // ==================== –ú–û–ù–ò–¢–û–† –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò ====================
        class PerformanceMonitor {
            constructor() {
                this.metrics = {
                    renderTime: 0,
                    gameTime: 0,
                    memoryUsage: 0
                };
                
                this.startTime = performance.now();
                this.logInterval = null;
                
                // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
                if (window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1')) {
                    this.logInterval = setInterval(() => this.logPerformance(), 30000);
                }
            }
            
            startMeasure(name) {
                if (this.logInterval) {
                    performance.mark(`${name}-start`);
                }
            }
            
            endMeasure(name) {
                if (this.logInterval) {
                    performance.mark(`${name}-end`);
                    performance.measure(name, `${name}-start`, `${name}-end`);
                    
                    const measures = performance.getEntriesByName(name);
                    if (measures.length > 0) {
                        this.metrics[name] = measures[measures.length - 1].duration;
                    }
                }
            }
            
            logPerformance() {
                if (performance.memory) {
                    this.metrics.memoryUsage = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024 * 100) / 100;
                }
                
                console.log('üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:', {
                    ...this.metrics,
                    uptime: ((performance.now() - this.startTime) / 1000).toFixed(1) + 's'
                });
            }
            
            destroy() {
                if (this.logInterval) {
                    clearInterval(this.logInterval);
                }
            }
        }

        // ==================== –ö–õ–ê–°–° –ò–ì–†–´ - –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô ====================
        class Classic6_45 {
            constructor() {
                this.selectedNumbers = new Set();
                this.gameHistory = [];
                this.userBalance = 0;
                this.dailySpent = 0;
                this.isPlaying = false;
                this.lastWin = 0;
                this.isTelegramApp = false;
                this.telegramUserId = null;
                this.perfMonitor = new PerformanceMonitor();
                
                // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                this.isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
                this.useSimpleAnimations = this.isMobile;
                this.renderQueue = [];
                this.isRendering = false;
                this.updateTimeout = null;
                this.cachedElements = {};
                this.batchMode = false;
                this.batchUpdates = [];
                
                this.init();
            }
            
            init() {
                console.log("üé∞ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ö–ª–∞—Å—Å–∏–∫–∞ 6/45...");
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø—É—Å–∫ –≤ Telegram Mini App
                this.checkTelegramEnvironment();
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è Telegram
                if (this.isTelegramApp) {
                    this.applyTelegramOptimizations();
                }
                
                this.loadGameData();
                this.initNumberGrid();
                this.updateUI();
                this.setupEventListeners();
                
                console.log("‚úÖ –ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞! –†–µ–∂–∏–º:", this.isTelegramApp ? "Telegram Mini App" : "–ë—Ä–∞—É–∑–µ—Ä");
            }
            
            checkTelegramEnvironment() {
                if (window.Telegram && Telegram.WebApp) {
                    this.isTelegramApp = true;
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Web App
                    Telegram.WebApp.expand();
                    Telegram.WebApp.setBackgroundColor('#0a5c36');
                    Telegram.WebApp.enableClosingConfirmation();
                    
                    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    if (Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) {
                        this.telegramUserId = Telegram.WebApp.initDataUnsafe.user.id;
                        console.log("üë§ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram:", this.telegramUserId);
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–µ–π
                    document.body.classList.add('telegram-mini-app');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–ª–∞–Ω—Å Telegram Stars
                    this.showTelegramBalance();
                    
                    // –í–∫–ª—é—á–∞–µ–º –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º –¥–ª—è Telegram
                    GAME_CONFIG.fastMode = true;
                    GAME_CONFIG.showAnimations = false;
                }
            }
            
            applyTelegramOptimizations() {
                console.log("‚ö° –ü—Ä–∏–º–µ–Ω—è–µ–º Telegram –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏...");
                
                // –£–ø—Ä–æ—â–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Telegram
                GAME_CONFIG.showAnimations = false;
                GAME_CONFIG.soundEffects = false;
                
                // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–∏–Ω–≥–æ–≤
                this.animationDelay = 0;
                this.renderDelay = 16;
                
                // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
                this.preloadResources();
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º CSS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
                this.applyCSSOptimizations();
                
                console.log("‚úÖ Telegram –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã");
            }
            
            preloadResources() {
                // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
                if ('requestIdleCallback' in window) {
                    requestIdleCallback(() => {
                        // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏
                        const preloadContainer = document.createElement('div');
                        preloadContainer.style.position = 'absolute';
                        preloadContainer.style.opacity = '0';
                        preloadContainer.style.pointerEvents = 'none';
                        document.body.appendChild(preloadContainer);
                        
                        // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∫–æ–Ω–∫–∏
                        const icons = ['üé∞', '‚≠ê', 'üé≤', 'üéØ', 'üìã', 'üóëÔ∏è'];
                        icons.forEach(icon => {
                            const span = document.createElement('span');
                            span.textContent = icon;
                            span.style.fontSize = '32px';
                            preloadContainer.appendChild(span);
                        });
                        
                        // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
                        setTimeout(() => {
                            document.body.removeChild(preloadContainer);
                        }, 1000);
                    });
                }
            }
            
            applyCSSOptimizations() {
                // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ CSS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
                const style = document.createElement('style');
                style.id = 'telegram-optimizations';
                style.textContent = `
                    body.telegram-mini-app .number-btn {
                        transition: transform 0.1s ease !important;
                    }
                    
                    body.telegram-mini-app .winning-numbers span {
                        animation: none !important;
                    }
                    
                    body.telegram-mini-app * {
                        -webkit-tap-highlight-color: transparent;
                    }
                    
                    @media (hover: none) {
                        .number-btn:hover, .control-btn:hover, .rules-btn:hover {
                            transform: none !important;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            showTelegramBalance() {
                const balanceElement = document.getElementById('telegramBalance');
                if (balanceElement) {
                    balanceElement.style.display = 'block';
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
                    document.getElementById('telegramStarsBalance').textContent = '1,500 ‚òÖ';
                }
            }
            
            initNumberGrid() {
                this.perfMonitor.startMeasure('initNumberGrid');
                
                const grid = document.getElementById('numbersGrid');
                if (!grid) {
                    console.error("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω —ç–ª–µ–º–µ–Ω—Ç numbersGrid!");
                    return;
                }
                
                grid.innerHTML = '';
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º DocumentFragment –¥–ª—è batch-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
                const fragment = document.createDocumentFragment();
                
                for (let i = 1; i <= GAME_CONFIG.totalNumbers; i++) {
                    const button = this.createNumberButton(i);
                    fragment.appendChild(button);
                }
                
                grid.appendChild(fragment);
                
                // –ö—ç—à–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                this.cachedElements.numberButtons = grid.querySelectorAll('.number-btn');
                
                this.perfMonitor.endMeasure('initNumberGrid');
            }
            
            createNumberButton(number) {
                const button = document.createElement('button');
                button.className = 'number-btn';
                button.textContent = number;
                button.dataset.number = number;
                button.title = `–ß–∏—Å–ª–æ ${number}`;
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
                button.addEventListener('touchstart', (e) => {
                    if (e.cancelable) {
                        e.preventDefault();
                    }
                    this.toggleNumber(number);
                }, { passive: false });
                
                button.addEventListener('click', () => this.toggleNumber(number));
                
                // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                if (!this.useSimpleAnimations && GAME_CONFIG.showAnimations) {
                    button.style.animationDelay = `${(number * 3)}ms`;
                    button.classList.add('fade-in');
                }
                
                return button;
            }
            
            toggleNumber(number) {
                if (this.isPlaying) return;
                
                const betType = this.getBetType();
                const maxNumbers = betType === 'expanded' ? 
                    GAME_CONFIG.maxExpanded : GAME_CONFIG.numbersToSelect;
                
                if (this.selectedNumbers.has(number)) {
                    this.selectedNumbers.delete(number);
                } else {
                    if (this.selectedNumbers.size >= maxNumbers) {
                        this.showNotification(`–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º ${maxNumbers} —á–∏—Å–µ–ª`);
                        return;
                    }
                    this.selectedNumbers.add(number);
                }
                
                this.highlightNumberButton(number, !this.selectedNumbers.has(number));
                this.updateUI();
            }
            
            highlightNumberButton(number, wasSelected) {
                const button = this.cachedElements.numberButtons?.[number - 1];
                if (!button) return;
                
                const isSelected = this.selectedNumbers.has(number);
                button.classList.toggle('selected', isSelected);
                
                // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                if (!this.useSimpleAnimations && GAME_CONFIG.showAnimations) {
                    if (isSelected) {
                        button.classList.add('bounce');
                        setTimeout(() => button.classList.remove('bounce'), 300);
                    } else if (wasSelected) {
                        button.classList.add('shake');
                        setTimeout(() => button.classList.remove('shake'), 300);
                    }
                }
            }
            
            quickPick() {
                if (this.isPlaying) return;
                
                this.perfMonitor.startMeasure('quickPick');
                
                const betType = this.getBetType();
                let count;
                
                if (betType === 'expanded') {
                    // –î–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–π —Å—Ç–∞–≤–∫–∏ —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç minExpanded –¥–æ maxExpanded
                    count = Math.floor(Math.random() * 
                        (GAME_CONFIG.maxExpanded - GAME_CONFIG.minExpanded + 1)) + 
                        GAME_CONFIG.minExpanded;
                } else {
                    // –î–ª—è –ø—Ä–æ—Å—Ç–æ–π —Å—Ç–∞–≤–∫–∏ –≤—Å–µ–≥–¥–∞ 6 —á–∏—Å–µ–ª
                    count = GAME_CONFIG.numbersToSelect;
                }
                
                // –ë–∞—Ç—á–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
                this.batchUpdate(() => {
                    // –°–Ω–∞—á–∞–ª–∞ –æ—á–∏—â–∞–µ–º –≤—Å–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è
                    Array.from(this.selectedNumbers).forEach(num => {
                        this.highlightNumberButton(num, true);
                    });
                    
                    this.selectedNumbers.clear();
                    
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ —á–∏—Å–ª–∞
                    const allNumbers = Array.from({length: GAME_CONFIG.totalNumbers}, (_, i) => i + 1);
                    const shuffled = this.shuffleArrayFast(allNumbers);
                    
                    // –ë–µ—Ä–µ–º —Ä–æ–≤–Ω–æ count —á–∏—Å–µ–ª
                    const newNumbers = shuffled.slice(0, count);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —á–∏—Å–ª–∞
                    newNumbers.forEach(num => {
                        this.selectedNumbers.add(num);
                        this.highlightNumberButton(num, false);
                    });
                });
                
                this.showNotification(`üé≤ –í—ã–±—Ä–∞–Ω–æ ${count} —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª!`);
                this.perfMonitor.endMeasure('quickPick');
            }
            
            shuffleArrayFast(array) {
                // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π shuffle –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±—ã—Å—Ç—Ä—ã–π Math.random –≤–º–µ—Å—Ç–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }
            
            batchUpdate(callback) {
                // –û—Ç–∫–ª–∞–¥—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                if (this.isRendering) {
                    this.renderQueue.push(callback);
                    return;
                }
                
                this.isRendering = true;
                
                requestAnimationFrame(() => {
                    callback();
                    
                    requestAnimationFrame(() => {
                        this.updateUI();
                        this.isRendering = false;
                        
                        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—á–µ—Ä–µ–¥—å
                        if (this.renderQueue.length > 0) {
                            const nextCallback = this.renderQueue.shift();
                            this.batchUpdate(nextCallback);
                        }
                    });
                });
            }
            
            clearSelection() {
                if (this.isPlaying) return;
                
                // –ë–∞—Ç—á–∏–Ω–≥ –æ—á–∏—Å—Ç–∫–∏
                this.batchUpdate(() => {
                    const previouslySelected = new Set(this.selectedNumbers);
                    this.selectedNumbers.clear();
                    
                    previouslySelected.forEach(num => {
                        this.highlightNumberButton(num, true);
                    });
                });
                
                this.showNotification('üóëÔ∏è –í—ã–±–æ—Ä –æ—á–∏—â–µ–Ω!');
            }
            
            playGame() {
                if (this.isPlaying) return;
                
                if (this.isTelegramApp) {
                    this.playGameInTelegram();
                } else {
                    this.playGameInBrowser();
                }
            }
            
            playGameInBrowser() {
                if (!this.validatePlayConditions()) {
                    return;
                }
                
                const betType = this.getBetType();
                const selectedArray = Array.from(this.selectedNumbers);
                const ticketCost = this.calculateTicketCost(betType, selectedArray.length);
                
                if (!this.showConfirmationDialog(betType, selectedArray, ticketCost)) {
                    return;
                }
                
                this.startGameSession(betType, selectedArray, ticketCost);
            }
            
            playGameInTelegram() {
                if (!this.validatePlayConditions()) {
                    return;
                }
                
                const betType = this.getBetType();
                const selectedArray = Array.from(this.selectedNumbers);
                const ticketCost = this.calculateTicketCost(betType, selectedArray.length);
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram UI –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                if (window.Telegram && Telegram.WebApp) {
                    Telegram.WebApp.showConfirm(
                        `–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É –±–∏–ª–µ—Ç–∞:\n\nüí∞ ${ticketCost} ‚òÖ\nüî¢ ${selectedArray.length} —á–∏—Å–µ–ª\n\n–ù–∞–∂–º–∏—Ç–µ –û–ö –¥–ª—è –∏–≥—Ä—ã`,
                        (confirmed) => {
                            if (confirmed) {
                                this.startOptimizedGameSession(betType, selectedArray, ticketCost);
                            }
                        }
                    );
                } else {
                    this.startOptimizedGameSession(betType, selectedArray, ticketCost);
                }
            }
            
            validatePlayConditions() {
                const betType = this.getBetType();
                const minNumbers = betType === 'expanded' ? 
                    GAME_CONFIG.minExpanded : GAME_CONFIG.numbersToSelect;
                
                if (this.selectedNumbers.size < minNumbers) {
                    this.showNotification(`–ù—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–∏–Ω–∏–º—É–º ${minNumbers} —á–∏—Å–µ–ª`);
                    return false;
                }
                
                const ticketCost = this.calculateTicketCost(betType, this.selectedNumbers.size);
                if (this.dailySpent + ticketCost > GAME_CONFIG.maxDailyBet) {
                    this.showNotification(`–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç! –ú–∞–∫—Å: ${GAME_CONFIG.maxDailyBet} ‚òÖ`);
                    return false;
                }
                
                return true;
            }
            
            showConfirmationDialog(betType, numbers, cost) {
                const message = `üé´ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å—Ç–∞–≤–∫—É:
                    
üìä –¢–∏–ø: ${betType === 'expanded' ? '–†–ê–ó–í–ï–†–ù–£–¢–ê–Ø' : '–ü–†–û–°–¢–ê–Ø'}
üî¢ –ß–∏—Å–µ–ª: ${numbers.length}
üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} ‚òÖ
üíµ –°–µ–≥–æ–¥–Ω—è: ${this.dailySpent} / ${GAME_CONFIG.maxDailyBet} ‚òÖ
                    
–û–ö - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å`;
                
                return confirm(message.trim());
            }
            
            startGameSession(betType, selectedNumbers, ticketCost) {
                this.perfMonitor.startMeasure('gameSession');
                
                this.isPlaying = true;
                this.disableInterface(true);
                this.dailySpent += ticketCost;
                
                const winningNumbers = this.generateWinningNumbersOptimized();
                const matchedNumbers = this.calculateMatches(selectedNumbers, winningNumbers);
                const winAmount = this.calculateWinAmount(betType, matchedNumbers.length);
                
                this.saveGameResult(selectedNumbers, winningNumbers, matchedNumbers, winAmount, ticketCost);
                
                if (winAmount > 0) {
                    this.userBalance += winAmount;
                    this.lastWin = winAmount;
                }
                
                this.showGameResultsOptimized(winningNumbers, matchedNumbers, winAmount, ticketCost);
                
                setTimeout(() => {
                    this.isPlaying = false;
                    this.disableInterface(false);
                    this.updateUI();
                }, 2500);
                
                this.perfMonitor.endMeasure('gameSession');
            }
            
            startOptimizedGameSession(betType, selectedNumbers, ticketCost) {
                this.isPlaying = true;
                this.disableInterface(true);
                this.dailySpent += ticketCost;
                
                // –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∏—Å–µ–ª –¥–ª—è Telegram
                const winningNumbers = this.generateWinningNumbersFast();
                const matchedNumbers = this.calculateMatches(selectedNumbers, winningNumbers);
                const winAmount = this.calculateWinAmount(betType, matchedNumbers.length);
                
                // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
                const gameResult = {
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    selectedNumbers: [...selectedNumbers].sort((a, b) => a - b),
                    winningNumbers: [...winningNumbers],
                    matchedNumbers: [...matchedNumbers],
                    winAmount: winAmount,
                    ticketCost: ticketCost
                };
                
                this.gameHistory.unshift(gameResult);
                if (this.gameHistory.length > 20) {
                    this.gameHistory = this.gameHistory.slice(0, 20);
                }
                
                if (winAmount > 0) {
                    this.userBalance += winAmount;
                    this.lastWin = winAmount;
                    
                    // –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è Telegram
                    if (this.isTelegramApp && window.Telegram && Telegram.WebApp) {
                        Telegram.WebApp.showAlert(`üéâ –ü–û–ë–ï–î–ê! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winAmount} ‚òÖ`);
                    }
                }
                
                this.showOptimizedResults(winningNumbers, matchedNumbers, winAmount, ticketCost);
                
                setTimeout(() => {
                    this.isPlaying = false;
                    this.disableInterface(false);
                    this.updateUI();
                }, 2000);
            }
            
            generateWinningNumbersOptimized() {
                // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
                if (GAME_CONFIG.fastMode || this.isMobile) {
                    return this.generateWinningNumbersFast();
                } else {
                    return this.generateWinningNumbersSecure();
                }
            }
            
            generateWinningNumbersSecure() {
                const numbers = new Set();
                while (numbers.size < 6) {
                    const array = new Uint32Array(1);
                    crypto.getRandomValues(array);
                    const num = (array[0] % GAME_CONFIG.totalNumbers) + 1;
                    numbers.add(num);
                }
                return Array.from(numbers).sort((a, b) => a - b);
            }
            
            generateWinningNumbersFast() {
                const numbers = [];
                while (numbers.length < 6) {
                    const num = Math.floor(Math.random() * GAME_CONFIG.totalNumbers) + 1;
                    if (!numbers.includes(num)) {
                        numbers.push(num);
                    }
                }
                return numbers.sort((a, b) => a - b);
            }
            
            calculateMatches(selected, winning) {
                // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
                const winningSet = new Set(winning);
                return selected.filter(num => winningSet.has(num));
            }
            
            calculateWinAmount(betType, matchCount) {
                if (matchCount < 3) return 0;
                
                let winAmount = GAME_CONFIG.prizes[matchCount] || 0;
                
                if (betType === 'expanded' && matchCount === 6) {
                    winAmount *= GAME_CONFIG.expandedBonus;
                }
                
                return winAmount;
            }
            
            showGameResultsOptimized(winningNumbers, matchedNumbers, winAmount, ticketCost) {
                const resultDiv = document.getElementById('result');
                const winningDiv = document.getElementById('winningNumbers');
                
                if (!resultDiv || !winningDiv) return;
                
                winningDiv.innerHTML = '<strong>üéØ –í—ã–∏–≥—Ä—ã—à–Ω—ã–µ —á–∏—Å–ª–∞:</strong> ';
                
                // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–æ–∫–∞–∑ —á–∏—Å–µ–ª —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                winningNumbers.forEach((num, index) => {
                    setTimeout(() => {
                        const span = document.createElement('span');
                        span.textContent = num;
                        span.classList.add('winning-number');
                        
                        if (matchedNumbers.includes(num)) {
                            span.classList.add('matched');
                        }
                        
                        winningDiv.appendChild(span);
                        
                        if (GAME_CONFIG.showAnimations) {
                            span.classList.add('pop-in');
                        }
                    }, index * 150);
                });
                
                const isWin = winAmount > 0;
                resultDiv.innerHTML = `
                    <div class="result-details">
                        <h3>üé∞ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–ì–†–´</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <span class="label">üíµ –°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                <span class="value">${ticketCost.toLocaleString()} ‚òÖ</span>
                            </div>
                            <div class="result-item">
                                <span class="label">‚úÖ –°–æ–≤–ø–∞–¥–µ–Ω–∏–π:</span>
                                <span class="value">${matchedNumbers.length} –∏–∑ 6</span>
                            </div>
                            <div class="result-item">
                                <span class="label">üéØ –í–∞—à–∏ —á–∏—Å–ª–∞:</span>
                                <span class="value">${matchedNumbers.length > 0 ? matchedNumbers.join(', ') : '–Ω–µ—Ç'}</span>
                            </div>
                        </div>
                        <div class="${isWin ? 'win' : 'lose'}">
                            ${isWin ? `üéä –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú! –í–´ –í–´–ò–ì–†–ê–õ–ò ${winAmount.toLocaleString()} ‚òÖ!` : 'üòî –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –Ω–µ –≤—ã–∏–≥—Ä–∞–ª–∏'}
                        </div>
                    </div>
                `;
            }
            
            showOptimizedResults(winningNumbers, matchedNumbers, winAmount, ticketCost) {
                // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è Telegram
                const resultDiv = document.getElementById('result');
                const winningDiv = document.getElementById('winningNumbers');
                
                if (!resultDiv || !winningDiv) return;
                
                // –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö —á–∏—Å–µ–ª
                winningDiv.innerHTML = '<strong>üéØ –í—ã–∏–≥—Ä—ã—à–Ω—ã–µ —á–∏—Å–ª–∞:</strong> ';
                winningNumbers.forEach(num => {
                    const span = document.createElement('span');
                    span.textContent = num;
                    if (matchedNumbers.includes(num)) {
                        span.classList.add('matched');
                    }
                    winningDiv.appendChild(span);
                });
                
                const isWin = winAmount > 0;
                resultDiv.innerHTML = `
                    <div style="padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                        <div style="text-align: center; color: ${isWin ? '#4CAF50' : '#f44336'}; font-weight: bold; margin-bottom: 10px;">
                            ${isWin ? 'üéâ –ü–û–ë–ï–î–ê!' : 'üòî –ü–†–û–ò–ì–†–´–®'}
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0;">
                            <div style="text-align: center;">
                                <div style="color: #FFD700; font-size: 0.9rem;">–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
                                <div style="font-weight: bold;">${ticketCost} ‚òÖ</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #FFD700; font-size: 0.9rem;">–°–æ–≤–ø–∞–¥–µ–Ω–∏–π</div>
                                <div style="font-weight: bold;">${matchedNumbers.length}/6</div>
                            </div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: ${isWin ? 'rgba(76, 175, 80, 0.1)' : 'rgba(244, 67, 54, 0.1)'}; border-radius: 6px; border-left: 3px solid ${isWin ? '#4CAF50' : '#f44336'};">
                            ${isWin ? `–í—ã–∏–≥—Ä—ã—à: <strong>${winAmount.toLocaleString()} ‚òÖ</strong>` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                        </div>
                    </div>
                `;
            }
            
            saveGameResult(selected, winning, matched, winAmount, cost) {
                const gameResult = {
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    selectedNumbers: [...selected].sort((a, b) => a - b),
                    winningNumbers: [...winning],
                    matchedNumbers: [...matched],
                    winAmount: winAmount,
                    ticketCost: cost,
                    betType: this.getBetType(),
                    telegramUserId: this.telegramUserId
                };
                
                this.gameHistory.unshift(gameResult);
                
                if (this.gameHistory.length > 30) {
                    this.gameHistory = this.gameHistory.slice(0, 30);
                }
                
                this.saveGameData();
            }
            
            calculateTicketCost(betType, selectedCount) {
                if (betType === 'simple') {
                    return GAME_CONFIG.ticketPrice;
                } else {
                    const combinations = this.calculateCombinations(selectedCount, 6);
                    return combinations * GAME_CONFIG.ticketPrice;
                }
            }
            
            calculateCombinations(n, k) {
                if (k > n) return 0;
                if (k === 0 || k === n) return 1;
                
                // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç
                let result = 1;
                const minK = Math.min(k, n - k);
                
                for (let i = 1; i <= minK; i++) {
                    result = result * (n - minK + i) / i;
                }
                
                return Math.round(result);
            }
            
            getBetType() {
                const select = document.getElementById('betType');
                return select ? select.value : 'simple';
            }
            
            updateUI() {
                // Debounce —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
                if (this.updateTimeout) {
                    clearTimeout(this.updateTimeout);
                }
                
                this.updateTimeout = setTimeout(() => {
                    this.updateSelectionCounter();
                    this.updatePlayButton();
                    this.updateBalanceInfo();
                }, 16); // ~60fps
            }
            
            updateSelectionCounter() {
                const counter = document.getElementById('selectedNumbers');
                if (!counter) return;
                
                const betType = this.getBetType();
                const min = betType === 'expanded' ? GAME_CONFIG.minExpanded : GAME_CONFIG.numbersToSelect;
                const max = betType === 'expanded' ? GAME_CONFIG.maxExpanded : GAME_CONFIG.numbersToSelect;
                const count = this.selectedNumbers.size;
                
                counter.textContent = `–í—ã–±—Ä–∞–Ω–æ: ${count} –∏–∑ ${max} (–º–∏–Ω–∏–º—É–º ${min})`;
                
                if (count < min) {
                    counter.style.color = '#f44336';
                } else if (count === max) {
                    counter.style.color = '#4CAF50';
                } else {
                    counter.style.color = '#FFD700';
                }
            }
            
            updatePlayButton() {
                const playBtn = document.getElementById('playBtn');
                if (!playBtn) return;
                
                const betType = this.getBetType();
                const minNumbers = betType === 'expanded' ? 
                    GAME_CONFIG.minExpanded : GAME_CONFIG.numbersToSelect;
                
                playBtn.disabled = this.selectedNumbers.size < minNumbers;
                
                if (betType === 'expanded' && this.selectedNumbers.size >= GAME_CONFIG.minExpanded) {
                    const cost = this.calculateTicketCost('expanded', this.selectedNumbers.size);
                    playBtn.innerHTML = `<span>‚≠ê</span> –ò–≥—Ä–∞—Ç—å –∑–∞ <span class="stars-badge">${cost} <span class="star-icon">‚òÖ</span></span>`;
                } else {
                    playBtn.innerHTML = `<span>‚≠ê</span> –ò–≥—Ä–∞—Ç—å –∑–∞ <span class="stars-badge">${GAME_CONFIG.ticketPrice} <span class="star-icon">‚òÖ</span></span>`;
                }
            }
            
            updateBalanceInfo() {
                // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
            }
            
            showNotification(message, type = 'info') {
                console.log(`üîî ${message}`);
                
                // –í Telegram Mini App –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
                if (this.isTelegramApp && (type === 'success' || type === 'error')) {
                    if (window.Telegram && Telegram.WebApp) {
                        Telegram.WebApp.showAlert(message);
                        return;
                    }
                }
                
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <span>${this.getNotificationIcon(type)}</span>
                    <span>${message}</span>
                `;
                
                const container = document.getElementById('notificationContainer') || 
                                 this.createNotificationContainer();
                container.appendChild(notification);
                
                setTimeout(() => notification.classList.add('show'), 10);
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 2500);
            }
            
            createNotificationContainer() {
                const container = document.createElement('div');
                container.id = 'notificationContainer';
                container.className = 'notification-container';
                document.body.appendChild(container);
                return container;
            }
            
            getNotificationIcon(type) {
                const icons = {
                    'info': '‚ÑπÔ∏è',
                    'success': '‚úÖ',
                    'warning': '‚ö†Ô∏è',
                    'error': '‚ùå'
                };
                return icons[type] || 'üîî';
            }
            
            loadGameData() {
                try {
                    const savedData = localStorage.getItem('classic6_45_data');
                    if (savedData) {
                        const data = JSON.parse(savedData);
                        
                        this.userBalance = data.userBalance || 0;
                        this.dailySpent = data.dailySpent || 0;
                        this.gameHistory = data.gameHistory || [];
                        
                        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –±–æ–ª—å—à–µ —Å—É—Ç–æ–∫
                        const lastPlayDate = data.lastPlayDate;
                        if (lastPlayDate) {
                            const lastDate = new Date(lastPlayDate);
                            const today = new Date();
                            if (today.toDateString() !== lastDate.toDateString()) {
                                this.dailySpent = 0;
                            }
                        }
                    }
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                }
            }
            
            saveGameData() {
                try {
                    const data = {
                        userBalance: this.userBalance,
                        dailySpent: this.dailySpent,
                        gameHistory: this.gameHistory,
                        lastPlayDate: new Date().toISOString(),
                        telegramUserId: this.telegramUserId
                    };
                    
                    localStorage.setItem('classic6_45_data', JSON.stringify(data));
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:', error);
                }
            }
            
            setupEventListeners() {
                const betTypeSelect = document.getElementById('betType');
                if (betTypeSelect) {
                    betTypeSelect.addEventListener('change', () => {
                        this.updateUI();
                        this.showNotification(`–¢–∏–ø —Å—Ç–∞–≤–∫–∏: ${betTypeSelect.value === 'expanded' ? '–†–ê–ó–í–ï–†–ù–£–¢–ê–Ø' : '–ü–†–û–°–¢–ê–Ø'}`);
                    });
                }
                
                // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
                window.addEventListener('keydown', (event) => {
                    if (event.code === 'Space' && !this.isPlaying) {
                        event.preventDefault();
                        this.quickPick();
                    }
                    
                    if (event.code === 'Escape' && !this.isPlaying) {
                        this.clearSelection();
                    }
                });
                
                // –ê–≤—Ç–æ–≤—ã–±–æ—Ä –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
                window.addEventListener('load', () => {
                    setTimeout(() => {
                        if (GAME_CONFIG.autoPickIfEmpty && this.selectedNumbers.size === 0) {
                            this.quickPick();
                        }
                    }, 800);
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        this.updateUI();
                    }, 300);
                });
                
                // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑—É–º–∞
                document.addEventListener('touchstart', (e) => {
                    if (e.touches.length > 1) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }
            
            disableInterface(disabled) {
                const buttons = document.querySelectorAll('button:not(.rules-close), select');
                buttons.forEach(btn => {
                    btn.disabled = disabled;
                });
                
                const playBtn = document.getElementById('playBtn');
                if (playBtn) {
                    playBtn.disabled = disabled;
                    playBtn.innerHTML = disabled ? 
                        `<span class="loader"></span> –û–±—Ä–∞–±–æ—Ç–∫–∞...` : 
                        this.getPlayButtonContent();
                }
            }
            
            getPlayButtonContent() {
                const betType = this.getBetType();
                if (betType === 'expanded' && this.selectedNumbers.size >= GAME_CONFIG.minExpanded) {
                    const cost = this.calculateTicketCost('expanded', this.selectedNumbers.size);
                    return `<span>‚≠ê</span> –ò–≥—Ä–∞—Ç—å –∑–∞ <span class="stars-badge">${cost} <span class="star-icon">‚òÖ</span></span>`;
                } else {
                    return `<span>‚≠ê</span> –ò–≥—Ä–∞—Ç—å –∑–∞ <span class="stars-badge">${GAME_CONFIG.ticketPrice} <span class="star-icon">‚òÖ</span></span>`;
                }
            }
            
            shuffleArray(array) {
                return this.shuffleArrayFast(array);
            }
            
            destroy() {
                this.perfMonitor.destroy();
            }
        }

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        let gameInstance = null;

        function initGame() {
            if (!gameInstance) {
                gameInstance = new Classic6_45();
            }
            return gameInstance;
        }

        function quickPick() {
            if (gameInstance) gameInstance.quickPick();
        }

        function clearSelection() {
            if (gameInstance) gameInstance.clearSelection();
        }

        function playGame() {
            if (gameInstance) gameInstance.playGame();
        }

        function showRules() {
            const modal = document.getElementById('rulesModal');
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        function hideRules() {
            const modal = document.getElementById('rulesModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function hidePreloader() {
            const preloader = document.getElementById('preloader');
            if (preloader) {
                preloader.classList.add('hidden');
                setTimeout(() => {
                    preloader.style.display = 'none';
                }, 300);
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï ====================
        (function() {
            console.log('üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã –ö–ª–∞—Å—Å–∏–∫–∞ 6/45...');
            
            // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–ª–æ–∞–¥–µ—Ä —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –º–∏–Ω–∏–º—É–º
            setTimeout(hidePreloader, 1000);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Telegram Mini App
            const isTelegramWebApp = window.Telegram && Telegram.WebApp;
            
            if (isTelegramWebApp) {
                console.log('üì± –ó–∞–ø—É—Å–∫ –≤ Telegram Mini App');
                initTelegramApp();
            } else {
                console.log('üåê –ó–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
                initBrowserApp();
            }
            
            function initTelegramApp() {
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram
                Telegram.WebApp.ready();
                
                // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è viewport
                Telegram.WebApp.onEvent('viewportChanged', (event) => {
                    console.log('Viewport changed:', event);
                    setTimeout(() => {
                        if (gameInstance) gameInstance.updateUI();
                    }, 100);
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                Telegram.WebApp.onEvent('closing', () => {
                    console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è');
                    if (gameInstance) gameInstance.saveGameData();
                });
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
                setTimeout(() => {
                    gameInstance = initGame();
                    hidePreloader();
                }, 500);
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                window.addEventListener('click', (event) => {
                    const modal = document.getElementById('rulesModal');
                    if (event.target === modal) {
                        hideRules();
                    }
                });
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
                document.addEventListener('keydown', (event) => {
                    if (event.key === 'Escape') {
                        hideRules();
                    }
                });
                
                console.log('‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ Telegram Mini App!');
            }
            
            function initBrowserApp() {
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', initializeGame);
                } else {
                    initializeGame();
                }
                
                function initializeGame() {
                    setTimeout(() => {
                        gameInstance = initGame();
                        hidePreloader();
                        
                        window.addEventListener('click', (event) => {
                            const modal = document.getElementById('rulesModal');
                            if (event.target === modal) {
                                hideRules();
                            }
                        });
                        
                        document.addEventListener('keydown', (event) => {
                            if (event.key === 'Escape') {
                                hideRules();
                            }
                        });
                        
                        console.log('‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!');
                    }, 800);
                }
            }
            
            // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
            window.addEventListener('error', function(e) {
                console.error('‚ùå –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞:', e.error);
                hidePreloader();
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('beforeunload', function() {
                if (gameInstance) {
                    gameInstance.saveGameData();
                    gameInstance.destroy();
                }
            });
        })();
    </script>
</body>
    </html>
